$(document).on("click",".button_delete_genplan",function(){data.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),data.append("genplan_id",$(this).attr("data-genplan_id")),data.append("status",$(this).attr("data-status")),data.append("type","last_delete"),$.ajax({url:"/delete_genplan",data:data,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){0==a&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">O\'chirish muoffaqqiyatli amalga oshirildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),a>0&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">Rad etildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),$(".button_delete_genplan").prop("disabled","disabled"),$(".button_edit_genplan").prop("disabled","disabled")},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".button_delete_genplan_admin",function(){data.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),data.append("genplan_id",$(this).attr("data-genplan_id")),data.append("confirm",$(this).attr("data-confirm")),data.append("type","admin_delete"),$.ajax({url:"/delete_genplan",data:data,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){1==a&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">O\'chirish muoffaqqiyatli amalga oshirildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),2==a&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">Rad etildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),$(".button_delete_genplan_admin").prop("disabled","disabled")},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".button_save_new_genplan",function(){data.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),data.append("genplan_id",$(this).attr("data-genplan_id")),data.append("confirm",$(this).attr("data-confirm")),$.ajax({url:"/save_genplan",data:data,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){1==a&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">Saqlash muoffaqqiyatli amalga oshirildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),2==a&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">Rad etish muoffaqqiyatli amalga oshirildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),$(".button_save_new_genplan").prop("disabled","disabled")},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".button_save_edit_genplan",function(){data.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),data.append("confirm",$(this).attr("data-confirm")),data.append("genplan_id",$(this).attr("data-genplan_id")),$.ajax({url:"/save_edit_genplan",data:data,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){-11!=a?(1==a?$("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">O\'zgartirish muoffaqqiyatli amalga oshirildi. Oynani yangilang!</p>\n</div>'):$("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">O\'zgartirish rad etildi. Oynani yangilang !</p>\n</div>'),$("#my_alert_modal")[0].click(),$(".button_save_edit_genplan").prop("disabled","disabled")):console.log("Xatolik!!")},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".button_edit_genplan",function(){data.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),data.append("genplan_id",$(this).attr("data-genplan_id")),data.append("status",$(this).attr("data-status")),$.ajax({url:"/edit_genplan_dialog_tabs",data:data,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){var n=JSON.parse(a[0].genplan_data),t=n.features[0].properties;n.features[0].geometry.coordinates.forEach(function(a,n){var t={type:"Polygon",coordinates:a};L.geoJson(t,{onEachFeature:function(a,n){drawnItems.addLayer(n)}})});var e='<div id="tabs">\n  <ul data-layer_id=\''+a[0].genplan_id+"' data-layer_status='"+a[0].status+"' id=\"ul_dialog_tab_create\">\n    <li data-val='"+a[0].genplan_id+'\' ><a href="#tabs-00">Умумий маълумотлар</a></li>';for(var l in a[0].sub_genplans)e+='<li><a href="#tabs-'+a[0].sub_genplans[l].id+'"> '+a[0].sub_genplans[l].nomi+"</a></li>";for(var s in e+='</ul>\n\n\n<div id="tabs-00">\n    <h2 class=\'title_sub_main\'>Умумий маълумотлар</h2>\n    <hr class=\'hr_admin_tab\'>\n\n<label for=\'genplan_ahpn\' class=\'label_admin_input\'><span >Aholi punktining nomi:</span></label> \n<input id="genplan_ahpn"  type="text" class = "form-control">\n\n<label for=\'genplan_soata\' class=\'label_admin_input\'><span>Mamuriy hududiy_birliklarni belgilash tizimi kodi:</span></label> \n<input id="genplan_soata"  type="text" class = "form-control">\n\n<label for=\'genplan_apt\' class=\'label_admin_input\'><span>Aholi punktining tipi:</span></label> \n<input id="genplan_apt"  type="text" class = "form-control">\n\n<label for=\'genplan_apm\' class=\'label_admin_input\'><span>Aholi punktining maqomi:</span></label> \n<input id="genplan_apm"  type="text" class = "form-control">\n\n<label for=\'genplan_vil\' class=\'label_admin_input\'><span>Viloyat:</span></label> \n<select id="genplan_vil" class = "form-control">\n',viloyat)t.respublika_viloyat==viloyat[s].id?e+='<option selected value="'+viloyat[s].id+'" >'+viloyat[s].disUz+"</option>":e+='<option value="'+viloyat[s].id+'" >'+viloyat[s].disUz+"</option>";for(var l in e+='\n</select>\n<label for=\'genplan_tum_shah\' class=\'label_admin_input\'><span >Tuman,shahar nomi:</span></label> \n<input id="genplan_tum_shah"  type="text" class = "form-control">\n\n<label for=\'genplan_lt\' class=\'label_admin_input\'><span>Loyihalash tashkiloti shahar chegarasi loyihasini ishlab chiquvchi:</span></label>\n<input id="genplan_lt"  type="text" class = "form-control">\n\n<label for=\'genplan_ichy\' class=\'label_admin_input\'><span>Ishlab chiqalgan yil:</span></label> \n<input id="genplan_ichy"  type="text" class = "form-control">\n\n<label for=\'genplan_shchsj\' class=\'label_admin_input\'><span>Shahar chegarasi loyihasi hujjatlari saqlandigan joy:</span></label> \n<input id="genplan_shchsj"  type="text" class = "form-control">\n\n<label for=\'genplan_aplm\' class=\'label_admin_input\'><span>Aholi punktining loyihaviy maydoni ga:</span></label> \n<input id="genplan_aplm"  type="text" class = "form-control">\n\n<label for=\'genplan_als\' class=\'label_admin_input\'><span>Aholining loyihaviy soni:</span></label> \n<input id="genplan_als" type="text" class = "form-control">\n\n<label for=\'genplan_thm\' class=\'label_admin_input\'><span>Tasdiqlanganlik holati</span></label> \n\n<select id="genplan_thm" class = "form-control secret_inputs_checkbox">',"1"==t.tasdiqlanganligi?e+="<option value='1'selected >Tasdiqlangan</option>\n       <option value='0'>Tasdiqlanmagan</option>":e+="<option value='1' >Tasdiqlangan</option>\n      <option value='0' selected >Tasdiqlanmagan</option>",e+="</select>","1"==t.tasdiqlanganligi?e+="<div id='secret_inputs_div' style='display:block;'>":e+="<div id='secret_inputs_div' style='display:none;'>",e+='\n\n<label for=\'genplan_to\' class=\'label_admin_input\'><span>Shahar chegarasi loyihasini tasdiqlangan organ:</span></label> \n<input id="genplan_to"  type="text" class = "form-control">\n\n<label for=\'genplan_lhr\' class=\'label_admin_input\'><span >Shahar chegarasi loyiha tasdiqlash to\'g\'risidagi hujjat raqami va sanasi:</span></label> \n<input id="genplan_lhr"  type="text" class = "form-control">\n</div>\n\n\n<table class="table dialog_table_main_tab">\n\n<tr><td><span class="head_admin_tab">Grafik ma\'lumotlar:</span></td><td></td></tr>\n<tr>\n<td>\n\n<label class=\'form-control\'>\n<input type=\'file\' style=\'display:none;\' class="input_file" id=\'genplan_gm\'>\n<span class="span_admin_tab">'+repath(t.grafik_malumot)+"</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger delete_genplan_main_files\" data-file_type='gm'  value='delete'>\n</td></tr>\n\n<tr><td><span class=\"head_admin_tab\">Izohlovchi ma'lumot:</span></td><td></td></tr>\n<tr>\n<td>\n\n<label class='form-control'>\n<input type='file' style='display:none;' class=\"input_file\" id='genplan_im'>\n<span class=\"span_admin_tab\">"+repath(t.izohlovchi_malumot)+"</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger delete_genplan_main_files\"  data-file_type='im' value='delete'>\n</td></tr>\n</table>\n\n<br>\n    <input type=\"button\" id=\"create_genplan_button\" class='btn btn-primary' value=\"O'zgartirish\">\n   </div>",a[0].sub_genplans){for(var i in e+="<div class='tabs_main' id=\"tabs-"+a[0].sub_genplans[l].id+"\" data-sub_genplan_id='"+a[0].sub_genplans[l].id+"' data-id='-1'>\n<h2 class='title_sub_main'>"+a[0].sub_genplans[l].nomi+"</h2>\n <hr class='hr_admin_tab'>\n  ",e+='\n<table class="table dialog_table_main_tab">\n\n<tr><td><span class="head_admin_tab">PDF:</span></td><td></td></tr>\n<tr>\n<td><label class="form-control">\n\n<input type=\'file\' style=\'display:none;\' class="input_file" id=\'pdf_file_'+a[0].sub_genplans[l].id+"'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger\" id='delete_pdf_file_"+a[0].sub_genplans[l].id+"' value='delete'>\n</td></tr>\n\n<tr><td><span class=\"head_admin_tab\">Geotif:</span></td><td></td></tr>\n<tr>\n<td> <label class=\"form-control\">\n<input type='file' style='display:none;' class=\"input_file\" id='geotiff_file_"+a[0].sub_genplans[l].id+"'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button'  class=\"btn btn-danger\" id='delete_sub_genplan_"+a[0].sub_genplans[l].id+"' value='delete'>\n</td></tr>",a[0].sub_sub_genplans)e+='\n<tr><td><span class="head_admin_tab">'+a[0].sub_sub_genplans[i].nomi+':</span></td><td></td></tr>\n<tr><td><label class="form-control">\n<input type="file" data-val_sub_sub_data_id=\''+a[0].sub_sub_genplans[i].id+"' id='sub_sub_"+a[0].sub_genplans[l].id+"_"+a[0].sub_sub_genplans[i].id+'\' class="input_file"  style="display: none;" >\n<span class="span_admin_tab">Faylni tanlang</span>\n</label>\n</td><td style=\'width:70px;\'>\n<input type="button" value="delete" id=\'delete_sub_sub_'+a[0].sub_genplans[l].id+"_"+a[0].sub_sub_genplans[i].id+'\' class="btn btn-danger">\n</td></tr>';e+="\n</table>\n\n<input type='button' style='float:left;' class='admin_genplan_btn btn btn-primary' data-sub_genplan_id='"+a[0].sub_genplans[l].id+"' value=\"O'zgartirish\">\n<input type='button' class=\"btn btn-danger\" style='float:left; margin-left:10px;' id='delete_sub_all_"+a[0].sub_genplans[l].id+"' value='Delete all'>\n </div>"}for(var l in e+='\n<div id="load_alert_div"></div>\n</div>',$("#modal_create_genplan").html(e),$("#modal_create_genplan").dialog("open"),$("#genplan_ahpn").val(t.aholi_punktining_nomi),$("#genplan_soata").val(t.mamuriy_hududiy_birliklarni_belgilash_tizimi_kodi),$("#genplan_apt").val(t.aholi_punktining_tipi),$("#genplan_apm").val(t.aholi_punktining_maqomi),$("#genplan_tum_shah").val(t.tuman_shahar),$("#genplan_lt").val(t.loyihalash_tashkiloti_shahar_chegarasi_loyihasini_ishlab_chiquv),$("#genplan_ichy").val(t.ishlab_chiqalgan_yili),$("#genplan_shchsj").val(t.shahar_chegarasi_loyihasi_hujjatlari_saqlandigan_joy),$("#genplan_aplm").val(t.aholi_punktining_loyihaviy_maydoni_ga),$("#genplan_als").val(t.aholining_loyihaviy_soni),$("#genplan_to").val(t.shahar_chegarasi_loyihasini_tasdiqlangan_organ),$("#genplan_lhr").val(t.shahar_chegarasi_loyiha_tasdiqlash_tugrisidagi_hujjat_raqam_san),$("#tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix"),$("#tabs li").removeClass("ui-corner-top").addClass("ui-corner-left"),$("a[href='#tabs-00']").parent().addClass("bg-success"),a[0].sub_genplan_data)""!=a[0].sub_genplan_data[l].geotif&&($("input[id='geotiff_file_"+a[0].sub_genplan_data[l].sub_genplan_id_id+"']").parent().addClass("bg-success"),$("input[id='geotiff_file_"+a[0].sub_genplan_data[l].sub_genplan_id_id+"']").next().text("Fayl biriktirilgan")),""!=a[0].sub_genplan_data[l].pdf&&($("input[id='pdf_file_"+a[0].sub_genplan_data[l].sub_genplan_id_id+"']").parent().addClass("bg-success"),$("input[id='pdf_file_"+a[0].sub_genplan_data[l].sub_genplan_id_id+"']").next().text("Fayl biriktirilgan")),$("a[href='#tabs-"+a[0].sub_genplan_data[l].sub_genplan_id_id+"']").parent().addClass("bg-success"),$('input[id^="sub_sub_'+a[0].sub_genplan_data[l].sub_genplan_id_id+'_"]').each(function(n){$(this).attr("data-val_sub_sub_data_id",$(this).attr("data-val_sub_sub_data_id")+"_"+a[0].sub_genplan_data[l].id)});for(var l in a[0].sub_sub_genplan_datas)for(var i in a[0].sub_sub_genplan_datas[l])$('input[data-val_sub_sub_data_id="'+a[0].sub_sub_genplan_datas[l][i].sub_sub_genplan_id_id+"_"+a[0].sub_sub_genplan_datas[l][i].Sub_genplan_data_id_id+'"]').next().text("Fayl biriktirilgan "),$('input[data-val_sub_sub_data_id="'+a[0].sub_sub_genplan_datas[l][i].sub_sub_genplan_id_id+"_"+a[0].sub_sub_genplan_datas[l][i].Sub_genplan_data_id_id+'"]').parent().addClass("bg-success")},error:function(){console.log("Ajaxda xatolik!!")}})}),$("#button_create_genplan_dialog").on("click",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),$.ajax({url:"/list_sub_genplan",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){var n="<div id=\"tabs\">\n  <ul data-layer_id='-1' data-layer_status='1' id=\"ul_dialog_tab_create\">\n    <li data-val='-1' ><a href=\"#tabs-00\">Умумий маълумотлар</a></li>";for(var t in a[0].sub_genplans)n+='<li><a href="#tabs-'+a[0].sub_genplans[t].id+'"> '+a[0].sub_genplans[t].nomi+"</a></li>";for(var e in n+='</ul>\n<div id="tabs-00">\n    <h2 class=\'title_sub_main\'>Умумий маълумотлар</h2>\n    <hr class=\'hr_admin_tab\'>\n\n<label for=\'genplan_ahpn\' class=\'label_admin_input\'><span >Aholi punktining nomi:</span></label> \n<input id="genplan_ahpn" type="text" class = "form-control">\n\n<label for=\'genplan_soata\' class=\'label_admin_input\'><span>Mamuriy hududiy_birliklarni belgilash tizimi kodi:</span></label> \n<input id="genplan_soata" type="text" class = "form-control">\n\n<label for=\'genplan_apt\' class=\'label_admin_input\'><span>Aholi punktining tipi:</span></label> \n<input id="genplan_apt" type="text" class = "form-control">\n\n<label for=\'genplan_apm\' class=\'label_admin_input\'><span>Aholi punktining maqomi:</span></label> \n<input id="genplan_apm" type="text" class = "form-control">\n\n<label for=\'genplan_vil\' class=\'label_admin_input\'><span>Viloyat:</span></label> \n<select id="genplan_vil" class = "form-control">\n',viloyat)n+="<option value='"+viloyat[e].id+"'>"+viloyat[e].disUz+"</option>";for(var t in n+="\n</select>\n<label for='genplan_tum_shah' class='label_admin_input'><span >Tuman,shahar nomi:</span></label> \n<input id=\"genplan_tum_shah\" type=\"text\" class = \"form-control\">\n\n<label for='genplan_lt' class='label_admin_input'><span>Loyihalash tashkiloti shahar chegarasi loyihasini ishlab chiquvchi:</span></label>\n<input id=\"genplan_lt\" type=\"text\" class = \"form-control\">\n\n<label for='genplan_ichy' class='label_admin_input'><span>Ishlab chiqalgan yil:</span></label> \n<input id=\"genplan_ichy\" type=\"text\" class = \"form-control\">\n\n<label for='genplan_shchsj' class='label_admin_input'><span>Shahar chegarasi loyihasi hujjatlari saqlandigan joy:</span></label> \n<input id=\"genplan_shchsj\" type=\"text\" class = \"form-control\">\n\n<label for='genplan_aplm' class='label_admin_input'><span>Aholi punktining loyihaviy maydoni ga:</span></label> \n<input id=\"genplan_aplm\" type=\"text\" class = \"form-control\">\n\n<label for='genplan_als' class='label_admin_input'><span>Aholining loyihaviy soni:</span></label> \n<input id=\"genplan_als\" type=\"text\" class = \"form-control\">\n\n<label for='genplan_thm' class='label_admin_input'><span>Tasdiqlanganlik holati</span></label> \n\n<select id=\"genplan_thm\" class = \"form-control secret_inputs_checkbox\">\n<option value='1' >Tasdiqlangan</option>\n<option value='0' selected>Tasdiqlanmagan</option>\n</select>\n \n<div  id='secret_inputs_div' style='display:none;'>\n\n<label for='genplan_to' class='label_admin_input'><span>Shahar chegarasi loyihasini tasdiqlangan organ:</span></label> \n<input id=\"genplan_to\" type=\"text\" class = \"form-control \">\n\n<label for='genplan_lhr' class='label_admin_input'><span >Shahar chegarasi loyiha tasdiqlash to'g'risidagi hujjat raqami va sanasi:</span></label> \n<input id=\"genplan_lhr\" type=\"text\"  class = \"form-control\">\n</div>\n\n<table class=\"table dialog_table_main_tab\">\n\n<tr><td><span class=\"head_admin_tab\">Grafik ma'lumotlar:</span></td><td></td></tr>\n<tr>\n<td>\n\n<label class='form-control'>\n<input type='file' style='display:none;' class=\"input_file\" id='genplan_gm'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger delete_genplan_main_files\" data-file_type='gm'  value='delete'>\n</td></tr>\n\n<tr><td><span class=\"head_admin_tab\">Izohlovchi ma'lumot:</span></td><td></td></tr>\n<tr>\n<td>\n\n<label class='form-control'>\n<input type='file' style='display:none;' class=\"input_file\" id='genplan_im'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger delete_genplan_main_files\"  data-file_type='im' value='delete'>\n</td></tr>\n</table>\n\n<br>\n    <input type=\"button\" id=\"create_genplan_button\" class='btn btn-success' value=\"Saqlash\">\n    <input type=\"button\" id=\"delete_genplan_button\" class='btn btn-danger' value=\"Delete all\">\n  </div>",a[0].sub_genplans){for(var l in n+="<div class='tabs_main' id=\"tabs-"+a[0].sub_genplans[t].id+"\" data-sub_genplan_id='"+a[0].sub_genplans[t].id+"' data-id='-1'>\n<h2 class='title_sub_main'>"+a[0].sub_genplans[t].nomi+"</h2>\n <hr class='hr_admin_tab'>\n  ",n+='\n<table class="table dialog_table_main_tab">\n\n<tr><td><span class="head_admin_tab">PDF:</span></td><td></td></tr>\n<tr>\n<td><label class="form-control">\n\n<input type=\'file\' style=\'display:none;\' class="input_file" id=\'pdf_file_'+a[0].sub_genplans[t].id+"'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger\" id='delete_pdf_file_"+a[0].sub_genplans[t].id+"' value='delete'>\n</td></tr>\n\n<tr><td><span class=\"head_admin_tab\">Geotif:</span></td><td></td></tr>\n<tr>\n<td> <label class=\"form-control\">\n<input type='file' style='display:none;' class=\"input_file\" id='geotiff_file_"+a[0].sub_genplans[t].id+"'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button'  class=\"btn btn-danger\" id='delete_sub_genplan_"+a[0].sub_genplans[t].id+"' value='delete'>\n</td></tr>",a[0].sub_sub_genplans)n+='\n<tr><td><span class="head_admin_tab">'+a[0].sub_sub_genplans[l].nomi+':</span></td><td></td></tr>\n<tr><td><label class="form-control">\n<input type="file" id=\'sub_sub_'+a[0].sub_genplans[t].id+"_"+a[0].sub_sub_genplans[l].id+'\' class="input_file"  style="display: none;" >\n<span class="span_admin_tab">Faylni tanlang</span>\n</label>\n</td><td style=\'width:70px;\'>\n<input type="button" value="delete" id=\'delete_sub_sub_'+a[0].sub_genplans[t].id+"_"+a[0].sub_sub_genplans[l].id+'\' class="btn btn-danger">\n</td></tr>';n+="\n</table>\n\n<input type='button' style='float:left;' class='admin_genplan_btn btn btn-success' data-sub_genplan_id='"+a[0].sub_genplans[t].id+"' value='Saqlash'>\n<input type='button' class=\"btn btn-danger\" style='float:left; margin-left:10px;' id='delete_sub_all_"+a[0].sub_genplans[t].id+"' value='Delete all'>\n </div>"}n+='\n<div id="load_alert_div"></div>\n</div>',$("#modal_create_genplan").html(n),$("#modal_create_genplan").dialog("open"),$("#tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix"),$("#tabs li").removeClass("ui-corner-top").addClass("ui-corner-left");var s=Array();for(t=1;t<=50;t++)s.push(t);$("#tabs").tabs("option","disabled",s)},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".delete_genplan_main_files",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("genplan_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("type","main_files"),a.append("file_type",$(this).attr("data-file_type")),$.ajax({url:"/delete_sub_sub_genplan_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){$("#genplan_"+a.file_type).val(""),$("#genplan_"+a.file_type).next().text("Faylni tanlang"),$("#ul_dialog_tab_create").attr("data-layer_id",a.genplan_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status)},error:function(){console.log("Ajaxda xatolik !!")}})}),$(document).on("click",".admin_genplan_btn",function(){$("#load_alert_div").html("<img width='100px' height='100px' src='/static/img/processing.gif'>"),$("#load_alert_div").css({display:"block"});var a=new FormData,n=new Array;$("input[id^='sub_sub_"+$(this).attr("data-sub_genplan_id")+"']").each(function(t,e){e.files[0]&&(n.push($(this).attr("id").split("_")[3]),a.append("sub_genplan_"+$(this).attr("id").split("_")[3],e.files[0]))}),a.append("geotif_file",$("#geotiff_file_"+$(this).attr("data-sub_genplan_id"))[0].files[0]),a.append("pdf_file",$("#pdf_file_"+$(this).attr("data-sub_genplan_id"))[0].files[0]),a.append("itemsIndex",n.toString()),a.append("genplan_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("sub_genplan_id",$(this).attr("data-sub_genplan_id")),a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),$.ajax({url:"/create_sub_sub_genplan_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){if(-11==a&&($("#load_alert_div").html("<p>Publikatsiya qilishda munammo !!</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_error")),-11!=a&&-12!=a){if($("#load_alert_div").html("<p>Saqlandi !!</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_success"),$("#ul_dialog_tab_create").attr("data-layer_status",a.status),$("#ul_dialog_tab_create").attr("data-layer_id",a.genplan_id),$('a[href="#tabs-'+a.sub_genplan_id+'"]').parent().addClass("bg-success"),1==a.pdf_check&&($('input[id="pdf_file_'+a.sub_genplan_id+'"]').parent().addClass("bg-success"),$('input[id="pdf_file_'+a.sub_genplan_id+'"]').val(""),$('input[id="pdf_file_'+a.sub_genplan_id+'"]').next().text("Fayl biriktirilgan")),1==a.geotif_check&&($('input[id="geotiff_file_'+a.sub_genplan_id+'"]').parent().addClass("bg-success"),$('input[id="geotiff_file_'+a.sub_genplan_id+'"]').val(""),$('input[id="geotiff_file_'+a.sub_genplan_id+'"]').next().text("Fayl biriktirilgan")),1==a.items_index_check)for(var n in a.sub_sub_genplan_ids)$('input[id="sub_sub_'+a.sub_genplan_id+"_"+a.sub_sub_genplan_ids[n]+'"]').parent().addClass("bg-success"),$('input[id="sub_sub_'+a.sub_genplan_id+"_"+a.sub_sub_genplan_ids[n]+'"]').val(""),$('input[id="sub_sub_'+a.sub_genplan_id+"_"+a.sub_sub_genplan_ids[n]+'"]').next().text("Fayl biriktirilgan")}else $("#load_alert_div").html("<p>Sub layer hosil qilinmagan !!</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_warning")},error:function(){console.log("Ajaxda xatolik !!")}})}),$("#modal_create_genplan").dialog({resizable:!1,autoOpen:!1,height:700,width:950,modal:!1,dialogClass:"modal_create_genplan",create:function(a){$(".modal_create_genplan").children(".ui-dialog-titlebar").append("<button  type='button' class='img_mini_maxi' data-val='0'>-x-</button>")},close:function(){drawnItems.clearLayers()},show:{effect:"blind",duration:200},hide:{effect:"blind",duration:200}}),$(document).on("click","input[id^='delete_sub_all_']",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("genplan_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("sub_genplan_id",$(this).attr("id").split("_")[3]),a.append("type","delete_sub_all"),$.ajax({url:"/delete_sub_sub_genplan_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){0!=a&&($("#ul_dialog_tab_create").attr("data-layer_id",a.genplan_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status),$("input[id^='pdf_file_"+a.sub_genplan_id+"']").val(""),$("input[id^='pdf_file_"+a.sub_genplan_id+"']").next().text("Faylni tanlang"),$("input[id^='pdf_file_"+a.sub_genplan_id+"']").parent().removeClass("bg-success"),$("input[id^='geotiff_file_"+a.sub_genplan_id+"']").val(""),$("input[id^='geotiff_file_"+a.sub_genplan_id+"']").next().text("Faylni tanlang"),$("input[id^='geotiff_file_"+a.sub_genplan_id+"']").parent().removeClass("bg-success"),$("input[id^='sub_sub_"+a.sub_genplan_id+"_']").each(function(){$(this).val(""),$(this).next().text("Faylni tanlang"),$(this).parent().removeClass("bg-success")}),$('a[href="#tabs-'+a.sub_genplan_id+'"]').parent().removeClass("bg-success"))},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click","input[id^='delete_sub_sub_']",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("genplan_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("sub_genplan_id",$(this).attr("id").split("_")[3]),a.append("sub_sub_genplan_id",$(this).attr("id").split("_")[4]),a.append("type","sub_sub_genplan"),$.ajax({url:"/delete_sub_sub_genplan_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){0!=a&&($("#ul_dialog_tab_create").attr("data-layer_id",a.genplan_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status),$("input[id='sub_sub_"+a.sub_genplan_id+"_"+a.sub_sub_genplan_id+"']").val(""),$("input[id='sub_sub_"+a.sub_genplan_id+"_"+a.sub_sub_genplan_id+"']").next().text("Faylni tanlang"),$("input[id='sub_sub_"+a.sub_genplan_id+"_"+a.sub_sub_genplan_id+"']").parent().removeClass("bg-success"))},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click","input[id^='delete_pdf_file_']",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("genplan_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("sub_genplan_id",$(this).attr("id").split("_")[3]),a.append("type","delete_pdf_file"),$.ajax({url:"/delete_sub_sub_genplan_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){0!=a&&($("#ul_dialog_tab_create").attr("data-layer_id",a.genplan_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status),$("input[id^='pdf_file_"+a.sub_genplan_id+"']").val(""),$("input[id^='pdf_file_"+a.sub_genplan_id+"']").next().text("Faylni tanlang"),$("input[id^='pdf_file_"+a.sub_genplan_id+"']").parent().removeClass("bg-success"))},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click","input[id^='delete_sub_genplan']",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("genplan_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("type","sub_genplan"),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("sub_genplan_id",$(this).attr("id").split("_")[3]),$.ajax({url:"/delete_sub_sub_genplan_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){0!=a&&($("#ul_dialog_tab_create").attr("data-layer_id",a.genplan_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status),$("input[id^='sub_sub_"+a.sub_genplan_id+"_']").each(function(){$(this).val(""),$(this).next().text("Faylni tanlang"),$(this).parent().removeClass("bg-success")}),$("input[id^='geotiff_file_"+a.sub_genplan_id+"']").val(""),$("input[id^='geotiff_file_"+a.sub_genplan_id+"']").next().text("Faylni tanlang"),$("input[id^='geotiff_file_"+a.sub_genplan_id+"']").parent().removeClass("bg-success"))},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click","#delete_genplan_button",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("genplan_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("type","first_delete"),$.ajax({url:"/delete_genplan",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){if(1==a){$("#ul_dialog_tab_create").attr("data-layer_id",-1),$("input[id^='pdf_file_']").each(function(){$(this).val(""),$(this).next().text("Faylni tanlang"),$(this).parent().removeClass("bg-success")}),$("input[id^='geotiff_file_']").each(function(){$(this).val(""),$(this).next().text("Faylni tanlang"),$(this).parent().removeClass("bg-success")}),$("input[id^='sub_sub_']").each(function(){$(this).val(""),$(this).next().text("Faylni tanlang"),$(this).parent().removeClass("bg-success")}),$("a[href^='#tabs-']").each(function(){$(this).parent().removeClass("bg-success")});for(var n=Array(),t=1;t<50;t++)n.push(t);$("#tabs").tabs("option","disabled",n)}},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click","#create_genplan_button",function(){if($("#load_alert_div").css({display:"none"}),0==drawnItems.toGeoJSON().features.length)$("#load_alert_div").html("<p>Vektorli ma'lumotlar kiritilmagan</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_warning");else{var a,n=drawnItems.toGeoJSON().features[0].geometry.type;if("Polygon"==n){for(var t in a='{"type": "MultiPolygon","coordinates":[',n="polygon",drawnItems.toGeoJSON().features)a+=JSON.stringify(drawnItems.toGeoJSON().features[t].geometry.coordinates),t!=drawnItems.toGeoJSON().features.length-1&&(a+=",");a+="]}";var e=new FormData;e.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),e.append("genplan_id",$("#ul_dialog_tab_create").attr("data-layer_id")),e.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),e.append("geometry",a),e.append("genplan_vil",$("#genplan_vil").val()),e.append("genplan_thm",$("#genplan_thm").val()),e.append("genplan_gm",$("#genplan_gm")[0].files[0]),e.append("genplan_im",$("#genplan_im")[0].files[0]),$("#tabs-00 input[type='text']").each(function(){e.append($(this).attr("id"),$(this).val())}),$.ajax({url:"/create_genplan",data:e,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){$("#genplan_gm").val(""),$("#genplan_im").val(""),$("#load_alert_div").html("<p>Saqlandi !!</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_success"),$("#tabs").tabs("option","disabled",[]),$('a[href="#tabs-00"]').parent().addClass("bg-success"),$("#ul_dialog_tab_create").attr("data-layer_id",a.genplan_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status)},error:function(){console.log("Ajaxda xatolik!!")}})}else $("#load_alert_div").html("<p>Vektorli ma'lumotda xatolik bor!!</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_warning")}});