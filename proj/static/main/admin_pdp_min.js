$(document).on("click",".button_delete_pdp",function(){data.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),data.append("pdp_id",$(this).attr("data-pdp_id")),data.append("status",$(this).attr("data-status")),data.append("type","last_delete"),$.ajax({url:"/delete_pdp",data:data,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){0==a&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">O\'chirish muoffaqqiyatli amalga oshirildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),a>0&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">Rad etildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),$(".button_delete_pdp").prop("disabled","disabled"),$(".button_edit_pdp").prop("disabled","disabled")},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".button_delete_pdp_admin",function(){data.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),data.append("pdp_id",$(this).attr("data-pdp_id")),data.append("confirm",$(this).attr("data-confirm")),data.append("type","admin_delete"),$.ajax({url:"/delete_pdp",data:data,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){1==a&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">O\'chirish muoffaqqiyatli amalga oshirildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),2==a&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">Rad etildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),$(".button_delete_pdp_admin").prop("disabled","disabled")},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".button_save_new_pdp",function(){data.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),data.append("pdp_id",$(this).attr("data-pdp_id")),data.append("confirm",$(this).attr("data-confirm")),$.ajax({url:"/save_pdp",data:data,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){1==a&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">Saqlash muoffaqqiyatli amalga oshirildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),2==a&&($("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">Rad etish muoffaqqiyatli amalga oshirildi. Oynani yangilang!</p>\n</div>'),$("#my_alert_modal")[0].click()),$(".button_save_new_pdp").prop("disabled","disabled")},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".button_save_edit_pdp",function(){data.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),data.append("confirm",$(this).attr("data-confirm")),data.append("pdp_id",$(this).attr("data-pdp_id")),$.ajax({url:"/save_edit_pdp",data:data,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){-11!=a?(1==a?$("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">O\'zgartirish muoffaqqiyatli amalga oshirildi. Oynani yangilang!</p>\n</div>'):$("#myalert_content").html('<div class="alert alert-success">\n<p class="alert_p">O\'zgartirish rad etildi. Oynani yangilang !</p>\n</div>'),$("#my_alert_modal")[0].click(),$(".button_save_edit_pdp").prop("disabled","disabled")):console.log("Xatolik!!")},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".button_edit_pdp",function(){data.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),data.append("pdp_id",$(this).attr("data-pdp_id")),data.append("status",$(this).attr("data-status")),$.ajax({url:"/edit_pdp_dialog_tabs",data:data,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){var t=JSON.parse(a[0].pdp_data),e=t.features[0].properties;t.features[0].geometry.coordinates.forEach(function(a,t){var e={type:"Polygon",coordinates:a};L.geoJson(e,{onEachFeature:function(a,t){drawnItems.addLayer(t)}})});var n='<div id="tabs">\n  <ul data-layer_id=\''+a[0].pdp_id+"' data-layer_status='"+a[0].status+"' id=\"ul_dialog_tab_create\">\n    <li data-val='"+a[0].pdp_id+'\' ><a href="#tabs-00">Умумий маълумотлар</a></li>';for(var s in a[0].sub_pdps)n+='<li><a href="#tabs-'+a[0].sub_pdps[s].id+'"> '+a[0].sub_pdps[s].nomi+"</a></li>";for(var d in n+='</ul>\n\n\n<div id="tabs-00">\n    <h2 class=\'title_sub_main\'>Умумий маълумотлар</h2>\n    <hr class=\'hr_admin_tab\'>\n\n<label for=\'pdp_ahpn\' class=\'label_admin_input\'><span >Aholi punktining nomi:</span></label> \n<input id="pdp_ahpn"  type="text" class = "form-control">\n\n<label for=\'pdp_soata\' class=\'label_admin_input\'><span>Mamuriy hududiy_birliklarni belgilash tizimi kodi:</span></label> \n<input id="pdp_soata"  type="text" class = "form-control">\n\n<label for=\'pdp_apt\' class=\'label_admin_input\'><span>Aholi punktining tipi:</span></label> \n<input id="pdp_apt"  type="text" class = "form-control">\n\n<label for=\'pdp_apm\' class=\'label_admin_input\'><span>Aholi punktining maqomi:</span></label> \n<input id="pdp_apm"  type="text" class = "form-control">\n\n<label for=\'pdp_vil\' class=\'label_admin_input\'><span>Viloyat:</span></label> \n<select id="pdp_vil" class = "form-control">\n',viloyat)e.respublika_viloyat==viloyat[d].id?n+='<option selected value="'+viloyat[d].id+'" >'+viloyat[d].disUz+"</option>":n+='<option value="'+viloyat[d].id+'" >'+viloyat[d].disUz+"</option>";for(var s in n+='\n</select>\n<label for=\'pdp_tum_shah\' class=\'label_admin_input\'><span >Tuman,shahar nomi:</span></label> \n<input id="pdp_tum_shah" type="text" class = "form-control">\n\n<label for=\'pdp_lt\' class=\'label_admin_input\'><span>Loyihalash tashkiloti shahar chegarasi loyihasini ishlab chiquvchi:</span></label>\n<input id="pdp_lt"  type="text" class = "form-control">\n\n<label for=\'pdp_ichy\' class=\'label_admin_input\'><span>Ishlab chiqalgan yil:</span></label> \n<input id="pdp_ichy" value="'+e.ishlab_chiqalgan_yili+'" type="text" class = "form-control">\n<label for=\'pdp_shchsj\' class=\'label_admin_input\'><span>Shahar chegarasi loyihasi hujjatlari saqlandigan joy:</span></label> \n<input id="pdp_shchsj"  type="text" class = "form-control">\n\n<label for=\'pdp_aplm\' class=\'label_admin_input\'><span>Aholi punktining loyihaviy maydoni ga:</span></label> \n<input id="pdp_aplm" type="text" class = "form-control">\n\n<label for=\'pdp_als\' class=\'label_admin_input\'><span>Aholining loyihaviy soni:</span></label> \n<input id="pdp_als"  type="text" class = "form-control">\n\n<label for=\'pdp_thm\' class=\'label_admin_input\'><span>Tasdiqlanganlik holati</span></label> \n\n<select id="pdp_thm" class = "form-control secret_inputs_checkbox">',"1"==e.tasdiqlanganligi?n+="<option value='1'selected >Tasdiqlangan</option>\n       <option value='0'>Tasdiqlanmagan</option>":n+="<option value='1' >Tasdiqlangan</option>\n      <option value='0' selected >Tasdiqlanmagan</option>",n+="</select>","1"==e.tasdiqlanganligi?n+="<div id='secret_inputs_div' style='display:block;'>":n+="<div id='secret_inputs_div' style='display:none;'>",n+='\n\n<label for=\'pdp_to\' class=\'label_admin_input\'><span>Shahar chegarasi loyihasini tasdiqlangan organ:</span></label> \n<input id="pdp_to"  type="text" class = "form-control">\n\n<label for=\'pdp_lhr\' class=\'label_admin_input\'><span >Shahar chegarasi loyiha tasdiqlash to\'g\'risidagi hujjat raqami va sanasi:</span></label> \n<input id="pdp_lhr"  type="text" class = "form-control">\n</div>\n\n\n<table class="table dialog_table_main_tab">\n\n<tr><td><span class="head_admin_tab">Grafik ma\'lumotlar:</span></td><td></td></tr>\n<tr>\n<td>\n\n<label class=\'form-control\'>\n<input type=\'file\' style=\'display:none;\' class="input_file" id=\'pdp_gm\'>\n<span class="span_admin_tab">'+repath(e.grafik_malumot)+"</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger delete_pdp_main_files\" data-file_type='gm'  value='delete'>\n</td></tr>\n\n<tr><td><span class=\"head_admin_tab\">Izohlovchi ma'lumot:</span></td><td></td></tr>\n<tr>\n<td>\n\n<label class='form-control'>\n<input type='file' style='display:none;' class=\"input_file\" id='pdp_im'>\n<span class=\"span_admin_tab\">"+repath(e.izohlovchi_malumot)+"</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger delete_pdp_main_files\"  data-file_type='im' value='delete'>\n</td></tr>\n</table>\n\n<br>\n    <input type=\"button\" id=\"create_pdp_button\" class='btn btn-primary' value=\"O'zgartirish\">\n   </div>",a[0].sub_pdps){for(var l in n+="<div class='tabs_main' id=\"tabs-"+a[0].sub_pdps[s].id+"\" data-sub_pdp_id='"+a[0].sub_pdps[s].id+"' data-id='-1'>\n<h2 class='title_sub_main'>"+a[0].sub_pdps[s].nomi+"</h2>\n <hr class='hr_admin_tab'>\n  ",n+='\n<table class="table dialog_table_main_tab">\n\n<tr><td><span class="head_admin_tab">PDF:</span></td><td></td></tr>\n<tr>\n<td><label class="form-control">\n\n<input type=\'file\' style=\'display:none;\' class="input_file" id=\'pdf_file_'+a[0].sub_pdps[s].id+"'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger\" id='delete_pdf_file_"+a[0].sub_pdps[s].id+"' value='delete'>\n</td></tr>\n\n<tr><td><span class=\"head_admin_tab\">Geotif:</span></td><td></td></tr>\n<tr>\n<td> <label class=\"form-control\">\n<input type='file' style='display:none;' class=\"input_file\" id='geotiff_file_"+a[0].sub_pdps[s].id+"'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button'  class=\"btn btn-danger\" id='delete_sub_pdp_"+a[0].sub_pdps[s].id+"' value='delete'>\n</td></tr>",a[0].sub_sub_pdps)n+='\n<tr><td><span class="head_admin_tab">'+a[0].sub_sub_pdps[l].nomi+':</span></td><td></td></tr>\n<tr><td><label class="form-control">\n<input type="file" data-val_sub_sub_data_id=\''+a[0].sub_sub_pdps[l].id+"' id='sub_sub_"+a[0].sub_pdps[s].id+"_"+a[0].sub_sub_pdps[l].id+'\' class="input_file"  style="display: none;" >\n<span class="span_admin_tab">Faylni tanlang</span>\n</label>\n</td><td style=\'width:70px;\'>\n<input type="button" value="delete" id=\'delete_sub_sub_'+a[0].sub_pdps[s].id+"_"+a[0].sub_sub_pdps[l].id+'\' class="btn btn-danger">\n</td></tr>';n+="\n</table>\n\n<input type='button' style='float:left;' class='admin_pdp_btn btn btn-primary' data-sub_pdp_id='"+a[0].sub_pdps[s].id+"' value=\"O'zgartirish\">\n<input type='button' class=\"btn btn-danger\" style='float:left; margin-left:10px;' id='delete_sub_pdp_all_"+a[0].sub_pdps[s].id+"' value='Delete all'>\n </div>"}for(var s in n+='\n<div id="load_alert_div"></div>\n</div>',$("#modal_create_pdp").html(n),$("#modal_create_pdp").dialog("open"),$("#pdp_ahpn").val(e.aholi_punktining_nomi),$("#pdp_soata").val(e.mamuriy_hududiy_birliklarni_belgilash_tizimi_kodi),$("#pdp_apt").val(e.aholi_punktining_tipi),$("#pdp_apm").val(e.aholi_punktining_maqomi),$("#pdp_tum_shah").val(e.tuman_shahar),$("#pdp_lt").val(e.loyihalash_tashkiloti_shahar_chegarasi_loyihasini_ishlab_chiquv),$("#pdp_ichy").val(e.ishlab_chiqalgan_yili),$("#pdp_shchsj").val(e.shahar_chegarasi_loyihasi_hujjatlari_saqlandigan_joy),$("#pdp_aplm").val(e.aholi_punktining_loyihaviy_maydoni_ga),$("#pdp_als").val(e.aholining_loyihaviy_soni),$("#pdp_to").val(e.shahar_chegarasi_loyihasini_tasdiqlangan_organ),$("#pdp_lhr").val(e.shahar_chegarasi_loyiha_tasdiqlash_tugrisidagi_hujjat_raqam_san),$("#tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix"),$("#tabs li").removeClass("ui-corner-top").addClass("ui-corner-left"),$("a[href='#tabs-00']").parent().addClass("bg-success"),a[0].sub_pdp_data)""!=a[0].sub_pdp_data[s].geotif&&($("input[id='geotiff_file_"+a[0].sub_pdp_data[s].sub_pdp_id_id+"']").parent().addClass("bg-success"),$("input[id='geotiff_file_"+a[0].sub_pdp_data[s].sub_pdp_id_id+"']").next().text("Fayl biriktirilgan")),""!=a[0].sub_pdp_data[s].pdf&&($("input[id='pdf_file_"+a[0].sub_pdp_data[s].sub_pdp_id_id+"']").parent().addClass("bg-success"),$("input[id='pdf_file_"+a[0].sub_pdp_data[s].sub_pdp_id_id+"']").next().text("Fayl biriktirilgan")),$("a[href='#tabs-"+a[0].sub_pdp_data[s].sub_pdp_id_id+"']").parent().addClass("bg-success"),$('input[id^="sub_sub_'+a[0].sub_pdp_data[s].sub_pdp_id_id+'_"]').each(function(t){$(this).attr("data-val_sub_sub_data_id",$(this).attr("data-val_sub_sub_data_id")+"_"+a[0].sub_pdp_data[s].id)});for(var s in a[0].sub_sub_pdp_datas)for(var l in a[0].sub_sub_pdp_datas[s])$('input[data-val_sub_sub_data_id="'+a[0].sub_sub_pdp_datas[s][l].sub_sub_pdp_id_id+"_"+a[0].sub_sub_pdp_datas[s][l].Sub_pdp_data_id_id+'"]').next().text("Fayl biriktirilgan "),$('input[data-val_sub_sub_data_id="'+a[0].sub_sub_pdp_datas[s][l].sub_sub_pdp_id_id+"_"+a[0].sub_sub_pdp_datas[s][l].Sub_pdp_data_id_id+'"]').parent().addClass("bg-success")},error:function(){console.log("Ajaxda xatolik!!")}})}),$("#button_create_pdp_dialog").on("click",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),$.ajax({url:"/list_sub_pdp",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){var t="<div id=\"tabs\">\n  <ul data-layer_id='-1' data-layer_status='1' id=\"ul_dialog_tab_create\">\n    <li data-val='-1' ><a href=\"#tabs-00\">Умумий маълумотлар</a></li>";for(var e in a[0].sub_pdps)t+='<li><a href="#tabs-'+a[0].sub_pdps[e].id+'"> '+a[0].sub_pdps[e].nomi+"</a></li>";for(var n in t+='</ul>\n<div id="tabs-00">\n    <h2 class=\'title_sub_main\'>Умумий маълумотлар</h2>\n    <hr class=\'hr_admin_tab\'>\n\n<label for=\'pdp_ahpn\' class=\'label_admin_input\'><span >Aholi punktining nomi:</span></label> \n<input id="pdp_ahpn" type="text" class = "form-control">\n\n<label for=\'pdp_soata\' class=\'label_admin_input\'><span>Mamuriy hududiy_birliklarni belgilash tizimi kodi:</span></label> \n<input id="pdp_soata" type="text" class = "form-control">\n\n<label for=\'pdp_apt\' class=\'label_admin_input\'><span>Aholi punktining tipi:</span></label> \n<input id="pdp_apt" type="text" class = "form-control">\n\n<label for=\'pdp_apm\' class=\'label_admin_input\'><span>Aholi punktining maqomi:</span></label> \n<input id="pdp_apm" type="text" class = "form-control">\n\n<label for=\'pdp_vil\' class=\'label_admin_input\'><span>Viloyat:</span></label> \n<select id="pdp_vil" class = "form-control">\n',viloyat)t+="<option value='"+viloyat[n].id+"'>"+viloyat[n].disUz+"</option>";for(var e in t+="\n</select>\n<label for='pdp_tum_shah' class='label_admin_input'><span >Tuman,shahar nomi:</span></label> \n<input id=\"pdp_tum_shah\" type=\"text\" class = \"form-control\">\n\n<label for='pdp_lt' class='label_admin_input'><span>Loyihalash tashkiloti shahar chegarasi loyihasini ishlab chiquvchi:</span></label>\n<input id=\"pdp_lt\" type=\"text\" class = \"form-control\">\n\n<label for='pdp_ichy' class='label_admin_input'><span>Ishlab chiqalgan yil:</span></label> \n<input id=\"pdp_ichy\" type=\"text\" class = \"form-control\">\n\n<label for='pdp_shchsj' class='label_admin_input'><span>Shahar chegarasi loyihasi hujjatlari saqlandigan joy:</span></label> \n<input id=\"pdp_shchsj\" type=\"text\" class = \"form-control\">\n\n\n<label for='pdp_aplm' class='label_admin_input'><span>Aholi punktining loyihaviy maydoni ga:</span></label> \n<input id=\"pdp_aplm\" type=\"text\" class = \"form-control\">\n\n<label for='pdp_als' class='label_admin_input'><span>Aholining loyihaviy soni:</span></label> \n<input id=\"pdp_als\" type=\"text\" class = \"form-control\">\n\n<label for='pdp_thm' class='label_admin_input'><span>Tasdiqlanganlik holati</span></label> \n\n<select id=\"pdp_thm\" class = \"form-control secret_inputs_checkbox\">\n<option value='1' >Tasdiqlangan</option>\n<option value='0' selected>Tasdiqlanmagan</option>\n</select>\n \n<div  id='secret_inputs_div' style='display:none;'>\n\n<label for='pdp_to' class='label_admin_input'><span>Shahar chegarasi loyihasini tasdiqlangan organ:</span></label> \n<input id=\"pdp_to\" type=\"text\" class = \"form-control\">\n\n<label for='pdp_lhr' class='label_admin_input'><span >Shahar chegarasi loyiha tasdiqlash to'g'risidagi hujjat raqami va sanasi:</span></label> \n<input id=\"pdp_lhr\" type=\"text\" class = \"form-control\">\n\n</div>\n<table class=\"table dialog_table_main_tab\">\n\n<tr><td><span class=\"head_admin_tab\">Grafik ma'lumotlar:</span></td><td></td></tr>\n<tr>\n<td>\n\n<label class='form-control'>\n<input type='file' style='display:none;' class=\"input_file\" id='pdp_gm'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger delete_pdp_main_files\" data-file_type='gm'  value='delete'>\n</td></tr>\n\n<tr><td><span class=\"head_admin_tab\">Izohlovchi ma'lumot:</span></td><td></td></tr>\n<tr>\n<td>\n\n<label class='form-control'>\n<input type='file' style='display:none;' class=\"input_file\" id='pdp_im'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger delete_pdp_main_files\"  data-file_type='im' value='delete'>\n</td></tr>\n</table>\n\n<br>\n    <input type=\"button\" id=\"create_pdp_button\" class='btn btn-success' value=\"Saqlash\">\n    <input type=\"button\" id=\"delete_pdp_button\" class='btn btn-danger' value=\"Delete all\">\n  </div>",a[0].sub_pdps){for(var s in t+="<div class='tabs_main' id=\"tabs-"+a[0].sub_pdps[e].id+"\" data-sub_pdp_id='"+a[0].sub_pdps[e].id+"' data-id='-1'>\n<h2 class='title_sub_main'>"+a[0].sub_pdps[e].nomi+"</h2>\n <hr class='hr_admin_tab'>\n  ",t+='\n<table class="table dialog_table_main_tab">\n\n<tr><td><span class="head_admin_tab">PDF:</span></td><td></td></tr>\n<tr>\n<td><label class="form-control">\n\n<input type=\'file\' style=\'display:none;\' class="input_file" id=\'pdf_file_'+a[0].sub_pdps[e].id+"'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button' class=\"btn btn-danger\" id='delete_pdf_file_"+a[0].sub_pdps[e].id+"' value='delete'>\n</td></tr>\n\n<tr><td><span class=\"head_admin_tab\">Geotif:</span></td><td></td></tr>\n<tr>\n<td> <label class=\"form-control\">\n<input type='file' style='display:none;' class=\"input_file\" id='geotiff_file_"+a[0].sub_pdps[e].id+"'>\n<span class=\"span_admin_tab\">Faylni tanlang</span>\n</label>\n</td>\n<td style='width:70px;'>\n<input type='button'  class=\"btn btn-danger\" id='delete_sub_pdp_"+a[0].sub_pdps[e].id+"' value='delete'>\n</td></tr>",a[0].sub_sub_pdps)t+='\n<tr><td><span class="head_admin_tab">'+a[0].sub_sub_pdps[s].nomi+':</span></td><td></td></tr>\n<tr><td><label class="form-control">\n<input type="file" id=\'sub_sub_'+a[0].sub_pdps[e].id+"_"+a[0].sub_sub_pdps[s].id+'\' class="input_file"  style="display: none;" >\n<span class="span_admin_tab">Faylni tanlang</span>\n</label>\n</td><td style=\'width:70px;\'>\n<input type="button" value="delete" id=\'delete_sub_sub_'+a[0].sub_pdps[e].id+"_"+a[0].sub_sub_pdps[s].id+'\' class="btn btn-danger">\n</td></tr>';t+="\n</table>\n\n<input type='button' style='float:left;' class='admin_pdp_btn btn btn-success' data-sub_pdp_id='"+a[0].sub_pdps[e].id+"' value='Saqlash'>\n<input type='button' class=\"btn btn-danger\" style='float:left; margin-left:10px;' id='delete_sub_pdp_all_"+a[0].sub_pdps[e].id+"' value='Delete all'>\n </div>"}t+='\n<div id="load_alert_div"></div>\n</div>',$("#modal_create_pdp").html(t),$("#modal_create_pdp").dialog("open"),$("#tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix"),$("#tabs li").removeClass("ui-corner-top").addClass("ui-corner-left");var d=Array();for(e=1;e<=50;e++)d.push(e);$("#tabs").tabs("option","disabled",d)},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".delete_pdp_main_files",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("pdp_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("type","main_files"),a.append("file_type",$(this).attr("data-file_type")),$.ajax({url:"/delete_sub_sub_pdp_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){$("#pdp_"+a.file_type).val(""),$("#pdp_"+a.file_type).next().text("Faylni tanlang"),$("#ul_dialog_tab_create").attr("data-layer_id",a.pdp_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status)},error:function(){console.log("Ajaxda xatolik !!")}})}),$(document).on("click",".admin_pdp_btn",function(){$("#load_alert_div").html("<img width='100px' height='100px' src='/static/img/processing.gif'>"),$("#load_alert_div").css({display:"block"});var a=new FormData,t=new Array;$("input[id^='sub_sub_"+$(this).attr("data-sub_pdp_id")+"']").each(function(e,n){n.files[0]&&(t.push($(this).attr("id").split("_")[3]),a.append("sub_pdp_"+$(this).attr("id").split("_")[3],n.files[0]))}),a.append("geotif_file",$("#geotiff_file_"+$(this).attr("data-sub_pdp_id"))[0].files[0]),a.append("pdf_file",$("#pdf_file_"+$(this).attr("data-sub_pdp_id"))[0].files[0]),a.append("itemsIndex",t.toString()),a.append("pdp_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("sub_pdp_id",$(this).attr("data-sub_pdp_id")),a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),$.ajax({url:"/create_sub_sub_pdp_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){if(-11==a&&($("#load_alert_div").html("<p>Publikatsiya qilishda munammo !!</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_error")),-11!=a&&-12!=a){if($("#load_alert_div").html("<p>Saqlandi !!</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_success"),$("#ul_dialog_tab_create").attr("data-layer_status",a.status),$("#ul_dialog_tab_create").attr("data-layer_id",a.pdp_id),$('a[href="#tabs-'+a.sub_pdp_id+'"]').parent().addClass("bg-success"),1==a.pdf_check&&($('input[id="pdf_file_'+a.sub_pdp_id+'"]').parent().addClass("bg-success"),$('input[id="pdf_file_'+a.sub_pdp_id+'"]').val(""),$('input[id="pdf_file_'+a.sub_pdp_id+'"]').next().text("Fayl biriktirilgan")),1==a.geotif_check&&($('input[id="geotiff_file_'+a.sub_pdp_id+'"]').parent().addClass("bg-success"),$('input[id="geotiff_file_'+a.sub_pdp_id+'"]').val(""),$('input[id="geotiff_file_'+a.sub_pdp_id+'"]').next().text("Fayl biriktirilgan")),1==a.items_index_check)for(var t in a.sub_sub_pdp_ids)$('input[id="sub_sub_'+a.sub_pdp_id+"_"+a.sub_sub_pdp_ids[t]+'"]').parent().addClass("bg-success"),$('input[id="sub_sub_'+a.sub_pdp_id+"_"+a.sub_sub_pdp_ids[t]+'"]').val(""),$('input[id="sub_sub_'+a.sub_pdp_id+"_"+a.sub_sub_pdp_ids[t]+'"]').next().text("Fayl biriktirilgan")}else $("#load_alert_div").html("<p>Sub layer hosil qilinmagan !!</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_warning")},error:function(){console.log("Ajaxda xatolik !!")}})}),$("#modal_create_pdp").dialog({resizable:!1,autoOpen:!1,height:700,width:950,modal:!1,dialogClass:"modal_create_pdp",create:function(a){$(".modal_create_pdp").children(".ui-dialog-titlebar").append("<button  type='button' class='img_mini_maxi' data-val='0'>-x-</button>")},close:function(){drawnItems.clearLayers()},show:{effect:"blind",duration:200},hide:{effect:"blind",duration:200}}),$(document).on("click","input[id^='delete_sub_pdp_all_']",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("pdp_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("sub_pdp_id",$(this).attr("id").split("_")[4]),a.append("type","delete_sub_all"),$.ajax({url:"/delete_sub_sub_pdp_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){0!=a&&($("#ul_dialog_tab_create").attr("data-layer_id",a.pdp_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status),$("input[id^='pdf_file_"+a.sub_pdp_id+"']").val(""),$("input[id^='pdf_file_"+a.sub_pdp_id+"']").next().text("Faylni tanlang"),$("input[id^='pdf_file_"+a.sub_pdp_id+"']").parent().removeClass("bg-success"),$("input[id^='geotiff_file_"+a.sub_pdp_id+"']").val(""),$("input[id^='geotiff_file_"+a.sub_pdp_id+"']").next().text("Faylni tanlang"),$("input[id^='geotiff_file_"+a.sub_pdp_id+"']").parent().removeClass("bg-success"),$("input[id^='sub_sub_"+a.sub_pdp_id+"_']").each(function(){$(this).val(""),$(this).next().text("Faylni tanlang"),$(this).parent().removeClass("bg-success")}),$('a[href="#tabs-'+a.sub_pdp_id+'"]').parent().removeClass("bg-success"))},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click","input[id^='delete_sub_sub_']",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("pdp_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("sub_pdp_id",$(this).attr("id").split("_")[3]),a.append("sub_sub_pdp_id",$(this).attr("id").split("_")[4]),a.append("type","sub_sub_pdp"),$.ajax({url:"/delete_sub_sub_pdp_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){0!=a&&($("#ul_dialog_tab_create").attr("data-layer_id",a.pdp_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status),$("input[id='sub_sub_"+a.sub_pdp_id+"_"+a.sub_sub_pdp_id+"']").val(""),$("input[id='sub_sub_"+a.sub_pdp_id+"_"+a.sub_sub_pdp_id+"']").next().text("Faylni tanlang"),$("input[id='sub_sub_"+a.sub_pdp_id+"_"+a.sub_sub_pdp_id+"']").parent().removeClass("bg-success"))},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click","input[id^='delete_pdf_file_']",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("pdp_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("sub_pdp_id",$(this).attr("id").split("_")[3]),a.append("type","delete_pdf_file"),$.ajax({url:"/delete_sub_sub_pdp_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){0!=a&&($("#ul_dialog_tab_create").attr("data-layer_id",a.pdp_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status),$("input[id^='pdf_file_"+a.sub_pdp_id+"']").val(""),$("input[id^='pdf_file_"+a.sub_pdp_id+"']").next().text("Faylni tanlang"),$("input[id^='pdf_file_"+a.sub_pdp_id+"']").parent().removeClass("bg-success"))},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click","input[id^='delete_sub_pdp']",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("pdp_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("type","sub_pdp"),a.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),a.append("sub_pdp_id",$(this).attr("id").split("_")[3]),$.ajax({url:"/delete_sub_sub_pdp_data",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){0!=a&&($("#ul_dialog_tab_create").attr("data-layer_id",a.pdp_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status),$("input[id^='sub_sub_"+a.sub_pdp_id+"_']").each(function(){$(this).val(""),$(this).next().text("Faylni tanlang"),$(this).parent().removeClass("bg-success")}),$("input[id^='geotiff_file_"+a.sub_pdp_id+"']").val(""),$("input[id^='geotiff_file_"+a.sub_pdp_id+"']").next().text("Faylni tanlang"),$("input[id^='geotiff_file_"+a.sub_pdp_id+"']").parent().removeClass("bg-success"))},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click","#delete_pdp_button",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("pdp_id",$("#ul_dialog_tab_create").attr("data-layer_id")),a.append("type","first_delete"),$.ajax({url:"/delete_pdp",data:a,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){if(1==a){$("#ul_dialog_tab_create").attr("data-layer_id",-1),$("input[id^='pdf_file_']").each(function(){$(this).val(""),$(this).next().text("Faylni tanlang"),$(this).parent().removeClass("bg-success")}),$("input[id^='geotiff_file_']").each(function(){$(this).val(""),$(this).next().text("Faylni tanlang"),$(this).parent().removeClass("bg-success")}),$("input[id^='sub_sub_']").each(function(){$(this).val(""),$(this).next().text("Faylni tanlang"),$(this).parent().removeClass("bg-success")}),$("a[href^='#tabs-']").each(function(){$(this).parent().removeClass("bg-success")});for(var t=Array(),e=1;e<50;e++)t.push(e);$("#tabs").tabs("option","disabled",t)}},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click","#create_pdp_button",function(){var a;if($("#load_alert_div").css({display:"none"}),0==drawnItems.toGeoJSON().features.length)$("#load_alert_div").html("<p>Vektorli ma'lumotlar kiritilmagan</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_warning");else if("Polygon"==drawnItems.toGeoJSON().features[0].geometry.type){for(var t in a='{"type": "MultiPolygon","coordinates":[',drawnItems.toGeoJSON().features)a+=JSON.stringify(drawnItems.toGeoJSON().features[t].geometry.coordinates),t!=drawnItems.toGeoJSON().features.length-1&&(a+=",");a+="]}";var e=new FormData;e.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),e.append("pdp_id",$("#ul_dialog_tab_create").attr("data-layer_id")),e.append("status",$("#ul_dialog_tab_create").attr("data-layer_status")),e.append("geometry",a),e.append("pdp_vil",$("#pdp_vil").val()),e.append("pdp_thm",$("#pdp_thm").val()),e.append("pdp_gm",$("#pdp_gm")[0].files[0]),e.append("pdp_im",$("#pdp_im")[0].files[0]),$("#tabs-00 input[type='text']").each(function(){e.append($(this).attr("id"),$(this).val())}),$.ajax({url:"/create_pdp",data:e,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){$("#pdp_gm").val(""),$("#pdp_im").val(""),$("#load_alert_div").html("<p>Saqlandi !!</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_success"),$("#tabs").tabs("option","disabled",[]),$('a[href="#tabs-00"]').parent().addClass("bg-success"),$("#ul_dialog_tab_create").attr("data-layer_id",a.pdp_id),$("#ul_dialog_tab_create").attr("data-layer_status",a.status)},error:function(){console.log("Ajaxda xatolik!!")}})}else $("#load_alert_div").html("<p>Vektorli ma'lumotda xatolik bor!!</p>"),$("#load_alert_div").css({display:"block"}),$("#load_alert_div p").addClass("p_alert_admin_tab_warning")});