var search_marker;function my_repath(a){return""!=a?a=a.match(/[^\/\\]+$/)[0]:"NotFile"}function myencode(a){return btoa(encodeURI(a))}function mydecode(a){return decodeURI(atob(a))}function sortTable(a,t=0){var e,i,n,o,r,s,l,d,p=0;if(e=document.getElementById("table-info"),n=!0,0!=a)for(d="asc";n;){for(n=!1,i=e.rows,o=1;o<i.length-1;o++)if(l=!1,r=i[o].getElementsByTagName("TD")[a],s=i[o+1].getElementsByTagName("TD")[a],"asc"==d){if(r.innerHTML.toLowerCase()>s.innerHTML.toLowerCase()){l=!0;break}}else if("desc"==d&&r.innerHTML.toLowerCase()<s.innerHTML.toLowerCase()){l=!0;break}l?(i[o].parentNode.insertBefore(i[o+1],i[o]),n=!0,p++):0==p&&"asc"==d&&(d="desc",n=!0)}else for(;n;){for(n=!1,i=e.rows,o=1;o<i.length-1;o++)if(l=!1,r=i[o].getElementsByTagName("TD")[t],s=i[o+1].getElementsByTagName("TD")[t],Number(r.innerHTML)>Number(s.innerHTML)){l=!0;break}l&&(i[o].parentNode.insertBefore(i[o+1],i[o]),n=!0)}}$("#draw_edit").on("click",function(){$(".leaflet-draw-edit-edit")[0].click(),$("#tab-action-draw").css({top:"500px"})}),$("#draw_load").on("click",function(){$("#dialog_load_vector").dialog({resizable:!1,autoOpen:!0,height:320,width:320,modal:!0,show:{effect:"slide",duration:200},close:function(){$("#vec_file_type").val("shp"),$("#vec_file_proj").val("4326"),$("#upload_files_id").val(""),$("#upload_files_id").next().text("Faylni tanlang")},hide:{effect:"blind",duration:400}})}),$(document).on("click",".tag_download_sec",function(){var a=$(this).attr("data-filename"),t=document.createElement("a");t.setAttribute("href",mydecode(a)),t.setAttribute("target","blank"),t.setAttribute("download",my_repath(mydecode(a))),t.click()}),$(document).on("click",".sub_data_link",function(){var a=$(this).attr("data-filename");$("#a_magnify").attr("href",mydecode(a)),$("#a_magnify")[0].click()}),$(document).on("click",".save_list",function(){var a=[];$.each($("#"+$(this).attr("data-table_id")+" tr"),function(){var t=$(this),e={};if("none"!=t.css("display")){var i=0;$.each($("td",t),function(){col=$(this),e[i]=col.text(),i++}),a.push(e)}});var t=new FormData;t.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),t.append("type",$(this).attr("type")),t.append("dtype",$(this).attr("dtype")),t.append("tableObj",JSON.stringify(a)),$.ajax({url:"/to_list",data:t,processData:!1,contentType:!1,cache:!1,type:"post",success:function(a){var t=document.createElement("a");"list.pdf"==a?t.setAttribute("href","/static/folder_for_download/genplan_list.pdf"):"list.xlsx"==a&&t.setAttribute("href","/static/folder_for_download/xlsx.xlsx"),t.setAttribute("target","blank"),t.setAttribute("download",a),t.click()}})}),$("#all_maps").on("click",function(){"0"==$(this).attr("data-val")?($("#layer_control").css({width:"460px",height:"245px",border:"1px solid rgba(0,0,0,.25)",padding:"20px"}),$(this).attr("data-val","1")):($("#layer_control").css({width:"0px",height:"0px",border:"0px solid rgba(0,0,0,.25)",padding:"0px"}),$(this).attr("data-val","0"))});var viloyat=[{id:1,disUz:"Andijon viloyati",disRu:"Andijon vil"},{id:2,disUz:"Buxoro viloyati",disRu:"Buxoro vil"},{id:3,disUz:"Farg'ona viloyati",disRu:"Farg'ona vil"},{id:4,disUz:"Jizzax viloyati",disRu:"Jizzax vil"},{id:5,disUz:"Namangan viloyati",disRu:"Namangan vil"},{id:6,disUz:"Navoiy viloyati",disRu:"Navoiy vil"},{id:7,disUz:"Qashqadaryo viloyati",disRu:"Qashqadaryo vil"},{id:8,disUz:"Qoraqalpog'iston Respublikasi",disRu:"Qoraqalpog'iston Respublikasi"},{id:9,disUz:"Samarqand viloyati",disRu:"Samarqand vil"},{id:10,disUz:"Sirdaryo viloyati",disRu:"Sirdaryo vil"},{id:11,disUz:"Surxondaryo viloyati",disRu:"Surxondaryo vil"},{id:12,disUz:"Toshkent viloyati",disRu:"Toshkent vil"},{id:13,disUz:"Xorazm viloyati",disRu:"Xorazm vil"}],live_layer=0;function check_checked(a){return map.hasLayer(a)?"checked":""}$("#live_layers").on("click",function(){if("0"==$(this).attr("data-val")){live_layer=[{layer1:genplan,layer2:genplan_click,id:"checkbox_id_2_3_1",layer_name:"genplan",dis:"Bosh rejalar"},{layer1:pdp,layer2:pdp,id:"checkbox_id_2_3_2",layer_name:"pdp",dis:"Batafsil rejalashtirish loyihalari"},{layer1:apot,layer2:apot_click,id:"checkbox_id_2_2_1",layer_name:"apot",dis:"Hududlarni arxitekturaviy rejalashtirishni tashkillashtirish loyihalari"},{layer1:funk_zones_po_genplan,layer2:funk_zones_po_genplan,id:"checkbox_id_1_1_1",layer_name:"funk_zones_po_genplan",dis:"Bosh rejalar bo'yicha funksional zonalar"},{layer1:maktablar,layer2:maktablar,id:"maktablar_id",layer_name:"maktablar",dis:"Maktablar"},{layer1:funk_zones_po_apot,layer2:funk_zones_po_apot,id:"checkbox_id_1_1_2",layer_name:"funk_zones_po_apot",dis:"ARTL bo'yica funksiona zonalar"},{layer1:red_lines,layer2:red_lines,id:"checkbox_id_1_2_1",layer_name:"red_lines",dis:"Qizil chiziqlar"},{layer1:geologik_rayonlash,layer2:geologik_rayonlash,id:"checkbox_id_1_3_1",layer_name:"geologik_rayonlash",dis:"Geologik rayonlashtirish"},{layer1:apz,layer2:apz,id:"apz_id",layer_name:"apz",dis:"ART"},{layer1:psd,layer2:psd,id:"psd_id",layer_name:"psd",dis:"PSD"},{layer1:psd_ind,layer2:psd_ind,id:"psd_ind_id",layer_name:"psd_ind",dis:"PSD_ind"},{layer1:perm_rec,layer2:perm_rec,id:"perm_rec_id",layer_name:"perm_rec",dis:"perm_rec"},{layer1:smr,layer2:smr,id:"smr_id",layer_name:"smr",dis:"smr"},{layer1:pexpl,layer2:pexpl,id:"pexpl_id",layer_name:"pexpl",dis:"pexpl"},{layer1:pexpl_ind,layer2:pexpl_ind,id:"pexpl_ind_id",layer_name:"pexpl_ind",dis:"pexpl_ind"}];var a="";for(var t in live_layer)(map.hasLayer(live_layer[t].layer1)||map.hasLayer(live_layer[t].layer2))&&(a+="<tr ><td><input type='checkbox' checked id='live_layer_"+t+"' data-layer_name='"+live_layer[t].layer_name+"' class='live_layers_checkbox'></td><td><label for='live_layer_"+t+"'>"+live_layer[t].dis+"</label></td></tr>");$("#live_layer_table").html(a),$("#live_layer_control").css({width:"250px",height:"auto",border:"1px solid rgba(0,0,0,.25)",padding:"10px"}),$(this).attr("data-val","1")}else live_layer=0,$("#live_layer_control").css({width:"0px",height:"0px",border:"0px solid rgba(0,0,0,.25)",padding:"0px"}),$(this).attr("data-val","0")}),$(document).on("click",".live_layers_checkbox",function(){if($(this).prop("checked"))for(var a in live_layer)$(this).attr("data-layer_name")==live_layer[a].layer_name&&(map.addLayer(live_layer[a].layer1),$("#"+live_layer[a].id).prop("checked",!0));else for(var a in live_layer)$(this).attr("data-layer_name")==live_layer[a].layer_name&&(map.addLayer(live_layer[a].layer1),$("#"+live_layer[a].id).prop("checked",!1),map.removeLayer(live_layer[a].layer1),map.removeLayer(live_layer[a].layer2))}),$(document).on("click",".checkbox_layer_change",function(){"mytile"!=$(this).val()?(map.hasLayer(openstreetmap)&&map.removeLayer(openstreetmap),map.hasLayer(openstreetmap_topo)&&map.removeLayer(openstreetmap_topo),map.hasLayer(googleStreets)&&map.removeLayer(googleStreets),map.hasLayer(googleHybrid)&&map.removeLayer(googleHybrid),map.hasLayer(googleSat)&&map.removeLayer(googleSat),map.hasLayer(googleTerrain)&&map.removeLayer(googleTerrain),"openstreetmap_topo"==$(this).val()&&map.addLayer(openstreetmap_topo),"openstreetmap_mapnik"==$(this).val()&&map.addLayer(openstreetmap),"openstreetmap"==$(this).val()&&map.addLayer(openstreetmap),"googleStreets"==$(this).val()&&map.addLayer(googleStreets),"googleHybrid"==$(this).val()&&map.addLayer(googleHybrid),"googleSat"==$(this).val()&&map.addLayer(googleSat),"googleTerrain"==$(this).val()&&map.addLayer(googleTerrain)):$(this).prop("checked")?map.addLayer(mytile):map.removeLayer(mytile)}),$("#contol_zoom_plus").on("click",function(){map.setZoom(map.getZoom()+1)}),$("#contol_zoom_minus").on("click",function(){map.setZoom(map.getZoom()-1)}),$("#close_sub2menu").on("click",function(){$("#sub2menu").css({height:"0px",border:"0px solid rgba(0,0,0,.25)",padding:"0px"})}),$(document).on("click",".menu-items",function(){var a;if(map.hasLayer(uzb_vil)&&(map.removeLayer(uzb_vil),map.addLayer(uzb_res)),$("#sub2menu").css({height:"380px",border:"1px solid rgba(0,0,0,.25)",padding:"10px"}),$("#sub3menu").css({height:"0px",border:"0px solid rgba(0,0,0,.25)",padding:"0px"}),$("#p_sub2menu").html("<i style='font-weight:100;'>"+$(this).attr("data-n")+"-quyi tizim</i><br>"+$(this).children("h4").text()),"1"==$(this).attr("data-val")&&(a="<table class='table_2'>\n<tr class='tr2_sub2menu' data-val='11' ><td class='td_icon'></td><td>Funksional zonalash sxemalari</td></tr>\n<tr class='tr2_sub2menu' data-val='12' ><td class='td_icon'></td><td>Qizil chiziqlar</td></tr>\n<tr class='tr2_sub2menu' data-val='13' ><td class='td_icon'></td><td>Geologik rayonlashtirish </td></tr>\n</table>",$("#sub2menu_div").html(a)),"2"==$(this).attr("data-val")&&(a="<table class='table_2'>\n<tr class='tr2_sub2menu' data-val='22' ><td class='td_icon'></td><td>Bosh rejalar</td></tr>\n<tr class='tr2_sub2menu' data-val='23' ><td class='td_icon'></td><td>Batafsil rejalashtirish loyihalari</td></tr>\n<tr class='tr2_sub2menu' data-val='21' ><td class='td_icon'></td><td>Hududlarni arxitekturaviy rejalashtirishni tashkillashtirish loyihalari (ARTL)</td></tr>\n</table>",$("#sub2menu_div").html(a)),"3"==$(this).attr("data-val")&&$("#sub2menu_div").html("В процессе подготовки !!"),"4"==$(this).attr("data-val")&&(a="<table class='table_2'>\n<tr class='tr2_sub2menu' data-val='41'><td class='td_icon'></td><td>Openstreetmap resursi</td></tr>\n<tr class='tr2_sub2menu' data-val='42'><td class='td_icon'></td><td>Google resursi</td></tr>\n<tr class='tr2_sub2menu' data-val='43'><td class='td_icon'></td><td>Ortofotoplanlar</td></tr>\n</table>",$("#sub2menu_div").html(a)),"5"==$(this).attr("data-val")&&(a="<table class='table_2'>\n<tr class='tr2_sub2menu' data-val='51' ><td class='td_icon'></td><td>Openstreetmap resursidan izlash</td></tr>\n<tr class='tr2_sub2menu' data-val='52' ><td class='td_icon'></td><td>Aholi punktilari nomi bo'yicha ichki bazadan izlash</td></tr>\n</table>",$("#sub2menu_div").html(a)),"6"==$(this).attr("data-val")&&(a="<table class='table_4'>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='apz' class='info_table'></td><td><img src='/static/img/imgs_pod_67/apz.png' class='img_label'></td><td><input type='checkbox' "+check_checked(apz)+" data-layer_name='apz' class='obj_sub_checkbox' id='apz_id'></td><td><label class='info_label' for='apz_id'>Arxitektura-rejalashtirish topshiriqlari reestri</label></td><tr>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='psd' class='info_table'></td><td><img src='/static/img/imgs_pod_67/psd.png' class='img_label'></td><td><input type='checkbox' "+check_checked(psd)+" data-layer_name='psd' class='obj_sub_checkbox' id='psd_id'></td><td><label class='info_label' for='psd_id'>Binolar, inshootlar va boshqa obyektlar qurilishining loyiha-smeta hujjatlari reestri</label></td><tr>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='psd_ind' class='info_table'></td><td><img src='/static/img/imgs_pod_67/psd_ind.png' class='img_label'></td><td><input type='checkbox' "+check_checked(psd_ind)+" data-layer_name='psd_ind' class='obj_sub_checkbox' id='psd_ind_id'></td><td><label class='info_label' for='psd_ind_id'>Yakka tartibda uy-joy qurishga (rekonstruktsiya qilishga) loyiha-smeta hujjatlari reestri</label></td><tr>\n\n  </table>",$("#sub2menu_div").html(a)),"7"==$(this).attr("data-val")&&(a="<table class='table_4'>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='perm_rec' class='info_table'></td><td><img src='/static/img/imgs_pod_67/perm_rec.png' class='img_label'></td><td><input type='checkbox' "+check_checked(perm_rec)+" data-layer_name='perm_rec' class='obj_sub_checkbox' id='perm_rec_id'></td><td><label class='info_label' for='perm_rec_id'>Obyektni qayta ixtisoslashtirish va rekonstruktsiya qilish reestri</label></td><tr>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='smr' class='info_table'></td><td><img src='/static/img/imgs_pod_67/smr.png' class='img_label'></td><td><input type='checkbox' "+check_checked(smr)+" data-layer_name='smr' class='obj_sub_checkbox' id='smr_id'></td><td><label class='info_label' for='smr_id'>Qurilish-montaj ishlarini amalga oshirish reestri</label></td><tr>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='pexpl' class='info_table'></td><td><img src='/static/img/imgs_pod_67/pexpl.png' class='img_label'></td><td><input type='checkbox' "+check_checked(pexpl)+" data-layer_name='pexpl' class='obj_sub_checkbox' id='pexpl_id'></td><td><label class='info_label' for='pexpl_id'>Turar joy obyekti hisoblangan bino va inshootni foydalanishga qabul qilishi reestri</label></td><tr>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='pexpl_ind' class='info_table'></td><td><img src='/static/img/imgs_pod_67/pexpl_ind.png' class='img_label'></td><td><input type='checkbox' "+check_checked(pexpl_ind)+" data-layer_name='pexpl_ind' class='obj_sub_checkbox' id='pexpl_ind_id'></td><td><label class='info_label' for='pexpl_ind_id'>Noturar joy obyekti hisoblangan bino va inshootni foydalanishga qabul qilish reestri</label></td><tr>\n\n  </table>",$("#sub2menu_div").html(a)),"8"==$(this).attr("data-val")&&(a="<table class='table_4'>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='loy' class='info_table'></td><td><img src='/static/img/proektirovchiki.png' class='img_label'></td><td><input type='checkbox' "+check_checked(loy)+" data-layer_name='loy' class='obj_sub_checkbox' id='loy_id'></td><td><label class='info_label' for='loy_id'>Loyiha tashkilotlar</label></td><tr>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='pud' class='info_table'></td><td><img src='/static/img/zastroychiki.png' class='img_label' ></td><td><input type='checkbox' "+check_checked(pud)+" data-layer_name='pud'  class='obj_sub_checkbox' id='pud_id'></td><td><label class='info_label' for='pud_id'>Pudratchi tashkilotlar</label></td><tr>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='bjs' class='info_table'></td><td colspan='3'><label data-layer_name='bjs' class='info_table_2  info_label'>Buyurtmachi (jismoniy shaxs)</label></td><tr>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='bys' class='info_table'></td><td colspan='3'><label  data-layer_name='bys' class='info_table_2 info_label'>Buyurtmachi (yuridik shaxs)</label></td><tr>\n  </table>",$("#sub2menu_div").html(a)),"00"==$(this).attr("data-val")&&(a="<p style='margin:10px;font-style:italic;'>Bu xizmatdan foydalanish uchun avtorizatsiyadan o'tish talab qilinadi !</p>",$("#sub2menu_div").html(a)),"9"==$(this).attr("data-val")){var t=new FormData;t.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),t.append("query_type","docs_type");$.ajax({url:"/documents",data:t,processData:!1,contentType:!1,cache:!1,type:"post",success:function(a){var t="<table class='table_2'>";for(var e in a.list)t+="<tr class='tr2_sub2menu_pod9' data-tip_doc='"+a.list[e].id+"' ><td class='td_icon'></td><td>"+a.list[e].tip_dis+"</td></tr>";t+="</table>",$("#sub2menu_div").html(t)},error:function(){console.log("Ajaxda xatolik!!")}})}});var doc_type=new Array;function update_data(a){var t=a.split("-");return t[2]+"."+t[1]+"."+t[0]}function create_table_pod9(a,t=-1,e=0,i=0,n=0){var o="";o+="<tr id='table_head'>\n   <td >№</td>\n   <td >Info</td>\n   <td >Hujjat turi(guruh) </td> \n   <td >Hujjat turi</td>\n   <td >Hujjat nomi</td>   \n   <td >Sana</td>\n   <td >Hujjat raqami</td>\n   </tr>";var r=new FormData;r.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),r.append("query_type","docs_list"),r.append("docs_tip_id",a),r.append("docs_sub_tip_id",t),r.append("filter_date",n),r.append("date_begin",e),r.append("date_end",i),$.ajax({url:"/documents",data:r,processData:!1,contentType:!1,cache:!1,type:"post",success:function(a){var e=new Array,i=a[0].sub_doc,r="<option value='-1'>Все</option>";for(var s in i)e[i[s].id]=i[s].sub_tip_dis,r+="<option value='"+i[s].id+"'>"+i[s].sub_tip_dis+"</option>";-1==t&&$("#search-type_hujjat_pod9").html(r);var l=1,d=a[0].list;for(var s in d)o+="<tr>\n      <td style='text-align:center; vertical-align:middle;'>"+l+"</td>",""==d[s].file_doc||null==d[s].file_doc?o+="<td style='vertical-align:middle;'><a href='"+d[s].link_doc+"' target='blank'><button class='btn'>Ko'rish</button></a></td>":o+="<td style='vertical-align:middle;'><a href='"+d[s].file_doc+"' target='blank'><button class='btn'>Ko'rish</button></a></td>",o+="<td style='vertical-align:middle;'>"+doc_type[d[s].tip_doc_id]+"</td>\n      <td style='vertical-align:middle;'>"+e[d[s].sub_tip_doc_id]+"</td>\n      <td style='vertical-align:middle;'>"+d[s].doc_nomi+"</td>\n      <td style='vertical-align:middle;'>"+update_data(d[s].data)+"</td>\n      <td style='vertical-align:middle;'>"+d[s].nomer_doc+"</td>\n      <td style='display:none;' >"+d[s].tip_doc+"</td>\n      </tr>",l++;0==n&&('\n<div class="input-group-addon"> <label >Qidiriluvchi so\'z</label> </div>\n<input type="text" data-input_id=\'search-field_pod9\'  data-count=\'item-count_pod9\' data-type_id=\'search-type_pod9\'  data-maydon_id=\'search-field-id_pod9\'  data-table_id=\'table-info_pod9\' id="search-field_pod9" class = "form-control search_input">\n<div class="input-group-addon"> <label id="item-count_pod9" ></label> </div>\n',$("#search_data_div").html('\n<div class="input-group-addon"> <label >Qidiriluvchi so\'z</label> </div>\n<input type="text" data-input_id=\'search-field_pod9\'  data-count=\'item-count_pod9\' data-type_id=\'search-type_pod9\'  data-maydon_id=\'search-field-id_pod9\'  data-table_id=\'table-info_pod9\' id="search-field_pod9" class = "form-control search_input">\n<div class="input-group-addon"> <label id="item-count_pod9" ></label> </div>\n')),$("#button_date_filter").on("click",function(){var a=$("#search_data_input_begin").val(),t=$("#search_data_input_end").val();create_table_pod9($("#search-type_tip_pod9").val(),$("#search-type_hujjat_pod9").val(),a,t,1)}),$("#item-count_pod9").html("Barcha hujjatlar soni:"+(l-1)+"<br>"),$("#table-info_pod9").html(o),document.getElementById("table-info-div-id_pod9").scrollTop=0,$(".info_table").css({cursor:"pointer"}),document.querySelector("#table-info-div-id_pod9").addEventListener("scroll",scrollHendle)},error:function(){console.log("Ajaxda xatolik!!")}})}function create_table_object(a,t,e,i,n,o,r){a.css({cursor:"wait"}),$("#search-field").val("");var s="";s+="<tr id='table_head'>\n   <td >№</td>\n   <td >Info</td>\n   <td >Registratsiya sanasi</td>\n   <td >Identifikator</td>\n   <td >Nomi</td>\n   <td >Manzil</td>\n   </tr>";var l=new FormData;l.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),l.append("query_type",t),l.append("filter",e),l.append("pro_or_obj",i),l.append("inn",n),$.ajax({url:o,data:l,processData:!1,contentType:!1,cache:!1,type:"post",success:function(t){var e=1,i=t.list;for(var n in i)s+="<tr>\n      <td style='text-align:center'>"+e+"\n    <br><img src='/static/img/img/location.png' class='click_set_object' data-dtype='setObject' data-ltype='/proekti' data-id='"+i[n].id+"'></td>\n      <td><button class='btn full_info_object' data-stype='obj_proj' data-ptype='object' data-id='"+i[n].id+"'>Ko'rish</button></td>\n      <td>"+i[n].guas_registr_sana+"</td>\n      <td>"+i[n].identifikator+"</td>\n      <td>"+i[n].nomi+"</td>\n      <td>"+i[n].adress+"</td>\n      </tr>",e++;$("#item-count2").html("Barcha ob'yektlar soni:"+t.list.length+"<br>"),$("#to_pdf2").attr("dtype","proekti"),$("#to_xlsx2").attr("dtype","proekti"),$("#title_table2").html(r);$("#search-field-id2").html("<option selected value='-1'>Barcha ustunlardan</option>\n                  <option value='2'>Regsitratsita sanani bo'yicha</option>\n                  <option value='3'>Idintifikator bo'yicha</option>\n                  <option value='4'>Nomi bo'yicha</option>\n                  <option value='5'>Manzil bo'yicha</option>"),$("#table-info2").html(s),$("#dialog_table2").dialog({dialogClass:"dialog_table2",autoOpen:!0,resize:function(a){$(this).css({width:"auto"})},create:function(a){$(".dialog_table2").children(".ui-dialog-titlebar").append("<button  type='button' class='img_mini_maxi' data-val='0'>-x-</button>")},show:{effect:"blind",duration:300},hide:{effect:"slide",duration:300},height:700,width:1e3}),document.getElementById("table-info-div-id2").scrollTop=0,a.css({cursor:"pointer"}),document.querySelector("#table-info-div-id2").addEventListener("scroll",scrollHendle)},error:function(){console.log("Ajaxda xatolik!!")}})}function create_table_proekt(a,t,e,i,n,o,r){a.css({cursor:"wait"}),$("#search-field").val("");var s="";s+="<tr id='table_head'>\n   <td >№</td>\n   <td >Info</td>\n   <td >Registratsiya sanasi</td>\n   <td >Identifikator</td>\n   <td >Nomi</td>\n   <td >Manzil</td>\n   </tr>";var l=new FormData;l.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),l.append("query_type",t),l.append("filter",e),l.append("pro_or_obj",i),l.append("inn",n),$.ajax({url:o,data:l,processData:!1,contentType:!1,cache:!1,type:"post",success:function(t){var i=1,n=t.list;for(var o in n)s+="<tr>\n      <td style='text-align:center;'>"+i+"\n    <br><img src='/static/img/img/location.png' data-dtype='setObject' data-ltype='/proekti' class='click_set_object' data-id='"+n[o].id+"'></td>\n      <td><button class='btn full_info_object' data-stype='obj_proj' data-ptype='proekti' data-id='"+n[o].id+"'>Ko'rish</button></td>\n      <td>"+n[o].guas_registr_sana+"</td>\n      <td>"+n[o].identifikator+"</td>\n      <td>"+n[o].nomi+"</td>\n      <td>"+n[o].adress+"</td>\n      </tr>",i++;$("#item-count1").html("Barcha ob'yektlar soni:"+t.list.length+"<br>"),$("#to_pdf1").attr("dtype","proekti"),$("#to_xlsx1").attr("dtype","proekti"),"all"==e?$("#title_table1").html("Ro'yxatdan o'tkazilgan proektlar ro'yxati"):$("#title_table1").html(r);$("#search-field-id1").html("<option selected value='-1'>Barcha ustunlardan</option>\n                  <option value='2'>Regsitratsita sanani bo'yicha</option>\n                  <option value='3'>Idintifikator bo'yicha</option>\n                  <option value='4'>Nomi bo'yicha</option>\n                  <option value='5'>Manzil bo'yicha</option>"),$("#table-info1").html(s),$("#dialog_table1").dialog({dialogClass:"dialog_table1",autoOpen:!0,resize:function(a){$(this).css({width:"auto"})},create:function(a){$(".dialog_table1").children(".ui-dialog-titlebar").append("<button  type='button' class='img_mini_maxi' data-val='0'>-x-</button>")},show:{effect:"blind",duration:300},hide:{effect:"slide",duration:300},height:700,width:1e3}),document.getElementById("table-info-div-id1").scrollTop=0,a.css({cursor:"pointer"}),document.querySelector("#table-info-div-id1").addEventListener("scroll",scrollHendle)},error:function(){console.log("Ajaxda xatolik!!")}})}$(document).on("click",".tr2_sub2menu_pod9",function(){var a="<option value='-1'>Все</option>";$(".tr2_sub2menu_pod9").each(function(){a+="<option value='"+$(this).attr("data-tip_doc")+"'>"+$(this).children().last().text()+"</option>",doc_type[$(this).attr("data-tip_doc")]=$(this).children().last().text()}),$("#search-type_tip_pod9").html(a);var t=$(this).attr("data-tip_doc");$("#search-field-id_pod9").html("<option selected value='-1'>Barcha ustunlardan</option>\n                  <option value='4'>Hujjat nomi bo'yicha</option>\n                  <option value='5'>Qabul qilingan aniq sana bo'yicha</option>\n                  <option value='-2'>Qabul qilingan oraliq sana bo'yicha</option>\n                  <option value='6'>Hujjat raqami bo'yicha</option>"),$("#dialog_documents_info").dialog({title:"Нормативно-правовая основа",autoOpen:!0,dialogClass:"dialog_documents_info",resize:function(a){$(this).css({width:"auto"})},create:function(a){$(".dialog_documents_info").children(".ui-dialog-titlebar").append("<button  type='button' class='img_mini_maxi' data-val='0'>-x-</button>")},show:{effect:"blind",duration:300},hide:{effect:"slide",duration:300},height:700,width:1e3}),$("#search-type_tip_pod9").val(t),$("#search-field_pod9").val(""),create_table_pod9(t)}),$(document).on("change",".search-pod9_tip",function(){$("#search-field-id_pod9").val(-1),$("#search-type_pod9").val(1),$("#search-field_pod9").val(""),create_table_pod9($(this).val())}),$(document).on("change",".search-pod9_hujjat",function(){$("#search-field-id_pod9").val(-1),$("#search-type_pod9").val(1),$("#search-field_pod9").val(""),create_table_pod9($("#search-type_tip_pod9").val(),$(this).val())}),$(document).on("click",".img_mini_maxi",function(){"0"==$(this).attr("data-val")?($(this).parent().parent().css({height:"auto"}),$(this).parent().next().css({display:"none"}),$(this).html("-X-"),$(this).attr("data-val","1")):($(this).parent().next().css({display:"block"}),$(this).html("-x-"),$(this).attr("data-val","0"))}),$(document).on("click",".tr2_sub2menu",function(){var a=this,t=new FormData;t.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),$.ajax({url:"/sessia",data:t,processData:!1,contentType:!1,cache:!1,type:"post",success:function(t){sessia=t[0].sessia;var e="";$("#p_sub3menu").text($(a).text()),$("#sub3menu").css({height:"380px",border:"1px solid rgba(0,0,0,.25)",padding:"10px"}),"11"==$(a).attr("data-val")&&(e="<table class='table_3'>\n    <tr><td><input type='checkbox' class='checkbox_sub3menu' "+check_checked(funk_zones_po_genplan)+" id='checkbox_id_1_1_1' ></td><td><label class='label_sub3menu'  for='checkbox_id_1_1_1'>Bosh rejalar bo'yicha</label></td><td><img class='info_png' data-layer_name='funk_zones_po_genplan' data-layer_dis=\"Bosh rejalar bo'yicha funksional zonalar\"  src='/static/img/info.png'></td></tr>\n     <tr><td><input type='checkbox' class='checkbox_sub3menu' "+check_checked(funk_zones_po_apot)+" id='checkbox_id_1_1_2' ></td><td><label class='label_sub3menu'  for='checkbox_id_1_1_2'>Hududlarni arxitekturaviy rejalashtirishni tashkillashtirish loyihalari bo'yicha</label></td><td><img class='info_png' data-layer_name='funk_zones_po_apot' data-layer_dis=\"Hududlarni arxitekturaviy rejalashtirishni tashkillashtirish loyihalari bo'yicha qilingan funksional zonalar\"  src='/static/img/info.png'></td></tr>\n    </table>",$("#sub3menu_div").html(e)),"12"==$(a).attr("data-val")&&(e="<table class='table_4'>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='red_lines' class='info_table'></td><td><img src='/static/img/red_lines.png' class='img_label'></td><td><input type='checkbox' "+check_checked(red_lines)+" data-layer_name='red_lines' class='checkbox_sub3menu' id='checkbox_id_1_2_1'></td><td><label class='info_label' for='checkbox_id_1_2_1'>Qizil chiziqlar</label></td><tr>\n    </table>",$("#sub3menu_div").html(e)),"13"==$(a).attr("data-val")&&(e="<table class='table_4'>\n  <tr><td><img src='/static/img/table-icon.png' data-layer_name='geologik_rayonlash' class='info_table'></td><td><img src='/static/img/funk_zones.png' class='img_label'></td><td><input type='checkbox' "+check_checked(geologik_rayonlash)+" data-layer_name='geologik_rayonlash' class='checkbox_sub3menu' id='checkbox_id_1_3_1'></td><td><label class='info_label' for='checkbox_id_1_3_1'>Geologik rayonlashtirish</label></td><tr>\n    </table>",$("#sub3menu_div").html(e)),"21"==$(a).attr("data-val")&&(e="<table class='table_3'>\n  <tr><td><input type='checkbox' class='checkbox_sub3menu' "+check_checked(apot)+" id='checkbox_id_2_2_1' ></td><td><label class='label_sub3menu'  for='checkbox_id_2_2_1'>Hududlarni arxitekturaviy rejalashtirishni tashkillashtirish loyihalari</label></td><td><img class='info_png' data-layer_name='apot' data-layer_dis='Hududlarni arxitekturaviy rejalashtirishni tashkillashtirish loyihalari'  src='/static/img/info.png'></td></tr>","apot"==sessia.service&&(e+="<tr><td><input type='checkbox' class='checkbox_sub3menu' "+check_checked(apot_edit)+"  id='checkbox_id_2_2_1_1'></td><td><label class='label_sub3menu'  for='checkbox_id_2_2_1_1'>ARTL o'zgarishlar</label></td><td><img class='info_png' data-layer_name='apot_edit' data-layer_dis=\"ARTL o'zgarishlar\"  src='/static/img/info.png'></td></tr>"),e+="</table>",$("#sub3menu_div").html(e)),"22"==$(a).attr("data-val")&&(e="<table class='table_3'>\n    <tr><td><input type='checkbox' class='checkbox_sub3menu' "+check_checked(genplan)+"  id='checkbox_id_2_3_1'></td><td><label class='label_sub3menu'  for='checkbox_id_2_3_1'>Bosh rejalar</label></td><td><img class='info_png' data-layer_name='genplan' data-layer_dis='Bosh rejalar'  src='/static/img/info.png'></td></tr>","genplan"==sessia.service&&(e+="<tr><td><input type='checkbox' class='checkbox_sub3menu' "+check_checked(genplan_edit)+"  id='checkbox_id_2_3_1_1'></td><td><label class='label_sub3menu'  for='checkbox_id_2_3_1_1'>Bosh rejalar o'zgarishlar</label></td><td><img class='info_png' data-layer_name='genplan_edit' data-layer_dis=\"Bosh rejalar o'zgarishlar\"  src='/static/img/info.png'></td></tr>"),e+="</table>",$("#sub3menu_div").html(e)),"23"==$(a).attr("data-val")&&(e="<table class='table_3'>\n    <tr><td><input type='checkbox' class='checkbox_sub3menu' "+check_checked(pdp)+"  id='checkbox_id_2_3_2'></td><td><label class='label_sub3menu'  for='checkbox_id_2_3_2'>Batafsil rejalashtirish loyihalari</label></td><td><img class='info_png' data-layer_name='pdp' data-layer_dis='Batafsil rejalashtirish loyihalari'  src='/static/img/info.png'></td></tr>","pdp"==sessia.service&&(e+="<tr><td><input type='checkbox' class='checkbox_sub3menu' "+check_checked(pdp_edit)+"  id='checkbox_id_2_3_2_1'></td><td><label class='label_sub3menu'  for='checkbox_id_2_3_2_1'>Batafsil rejalashtirish loyihalari o'zgarishlar</label></td><td><img class='info_png' data-layer_name='pdp_edit' data-layer_dis=\"Batafsil rejalashtirish loyihalari o'zgarishlar\"  src='/static/img/info.png'></td></tr>"),e+=" </table>",$("#sub3menu_div").html(e)),"41"==$(a).attr("data-val")&&(e="<table class='table_3'>\n    <tr><td><input type='radio' value='openstreetmap_mapnik' name='radio-group' class='checkbox_layer_change' id='test8' ></td><td><label class='label_sub3menu'  for='test8'>Openstreetmap Mapnik</label></td></tr>\n    <tr><td><input type='radio' value='openstreetmap_topo' name='radio-group' class='checkbox_layer_change' id='test9' ></td><td><label class='label_sub3menu'  for='test9'>Openstreetmap Topology</label></td></td></tr>\n    </table>",$("#sub3menu_div").html(e)),"42"==$(a).attr("data-val")&&(e="<table class='table_3'>\n    <tr><td><input type='radio' value='googleStreets' name='radio-group' class='checkbox_layer_change' id='test10' ></td><td><label class='label_sub3menu'  for='test10'>googleStreets</label></td></tr>\n    <tr><td><input type='radio' value='googleTerrain' name='radio-group' class='checkbox_layer_change' id='test11' ></td><td><label class='label_sub3menu'  for='test11'>googleTerrain</label></td></td></tr>\n    <tr><td><input type='radio' value='googleSat' name='radio-group' class='checkbox_layer_change' id='test12' ></td><td><label class='label_sub3menu'  for='test12'>googleSat</label></td></td></tr>\n    <tr><td><input type='radio' value='googleHybrid' name='radio-group' class='checkbox_layer_change' id='test13' ></td><td><label class='label_sub3menu'  for='test13'>googleHybrid</label></td></td></tr>\n    </table>",$("#sub3menu_div").html(e)),"43"==$(a).attr("data-val")&&(e="<table class='table_3'>\n    <tr><td><input type='checkbox' value='mytile' name='radio-group' class='checkbox_layer_change' id='test14' ></td><td><label class='label_sub3menu'  for='test14'>Uchuvchisiz uchish apparatidan olingan aerofotosuratlar ortofotoplanlari</label></td></tr>\n    </table>",$("#sub3menu_div").html(e)),"51"==$(a).attr("data-val")&&(e="<input type='search' id='input_geosearch' placeholder=\"Adresni kiriting\"></input>\n<div id='geosearch_results'></div>\n",$("#sub3menu_div").html(e)),"52"==$(a).attr("data-val")&&(e="<input type='search' id='input_geosearch_from_our' placeholder=\"Adresni kiriting\"></input>\n<div id='geosearch_results_from_our'></div>\n",$("#sub3menu_div").html(e))},error:function(){console.log("Ajaxda xatolik!!")}})}),$(document).on("click",".geosearch_result_li",function(){map.hasLayer(search_marker)&&map.removeLayer(search_marker),search_marker=L.marker([$(this).attr("data-lng"),$(this).attr("data-lat")]).bindPopup('<div class="search_popup">'+$(this).text()+"</div>").addTo(map).openPopup(),map.flyToBounds([[$(this).attr("data-bounds-1"),$(this).attr("data-bounds-2")],[$(this).attr("data-bounds-3"),$(this).attr("data-bounds-4")]])}),$(document).on("click",".search_geolocation_polygon_li",function(){var a="/geodata?service=WFS&version=1.0.0&request=GetFeature&typeName=dshk:geolocation_polygon&outputFormat=application%2Fjson&cql_filter=id='"+$(this).attr("data-id")+"'";$.getJSON(a,function(a){if("MultiPolygon"==a.features[0].geometry.type)var t=gsch.bbox(gsch.multiPolygon(a.features[0].geometry.coordinates));if("Polygon"==a.features[0].geometry.type)t=gsch.bbox(gsch.Polygon(a.features[0].geometry.coordinates));map.flyToBounds([[t[1],t[0]],[t[3],t[2]]])})}),$(document).on("keyup","#input_geosearch",function(a){13==a.which&&$("#main_geosearch_button")[0].click()}),$(document).on("keyup","#input_geosearch_from_our",function(a){if(""!=$(this).val()){var t,e=$(this).val();t=/[^\u0000-\u007f]/.test(e)?0:1;var i=new FormData;i.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),i.append("text",e),i.append("lang",t),$.ajax({url:"/search_geolocation",data:i,cache:!1,contentType:!1,processData:!1,type:"post",success:function(a){i=JSON.parse(a.points),data2=JSON.parse(a.polygons);let n=0;if(e="",i.features.length>0){for(var o in n++,e+="<ul>",i.features)e+=0==t?"<li class='search_geolocation_li' data-lat='"+i.features[o].geometry.coordinates[0]+"'\ndata-lng='"+i.features[o].geometry.coordinates[1]+"'>"+i.features[o].properties.name_ru+", "+i.features[o].properties.name_ru+", "+i.features[o].properties.regionname+"</li>":"<li class='search_geolocation_li' data-lat='"+i.features[o].geometry.coordinates[0]+"'\ndata-lng='"+i.features[o].geometry.coordinates[1]+"'>"+i.features[o].properties.name_uz+", "+i.features[o].properties.name_uzb+", "+i.features[o].properties.regionnameuz+"</li>";e+="</ul>"}if(data2.features.length>0){for(var o in e+="<ul>",n++,data2.features)e+=0==t?"<li class='search_geolocation_polygon_li' data-id='"+data2.features[o].properties.id+"'>"+data2.features[o].properties.distr_name+", "+data2.features[o].properties.regionname+"</li>":"<li class='search_geolocation_polygon_li' data-id='"+data2.features[o].properties.id+"'>"+data2.features[o].properties.name_uzb+", "+data2.features[o].properties.regionnameuz+"</li>";e+="</ul>"}0==n&&(e="Topilmadi"),$("#geosearch_results_from_our").html(e)},error:function(){console.log("Ajaxda xatolik !!")}})}else $("#geosearch_results_from_our").html("")}),$(document).on("click",".search_geolocation_li",function(){map.hasLayer(search_marker)&&map.removeLayer(search_marker),search_marker=L.marker([$(this).attr("data-lng"),$(this).attr("data-lat")]).bindPopup('<div class="search_popup">'+$(this).text()+"</div>").addTo(map).openPopup(),map.flyTo([$(this).attr("data-lng"),$(this).attr("data-lat")],12)}),$("#close_sub3menu").on("click",function(){$("#sub3menu").css({height:"0px",border:"0px solid rgba(0,0,0,.25)",padding:"0px"})}),$("#close_sub4menu").on("click",function(){$("#sub4menu").css({height:"0px",border:"0px solid rgba(0,0,0,.25)",padding:"0px"})}),$("#menu").on("click",function(){"0"==$(this).attr("data-val")?($("#submenu").css({height:"380px",border:"1px solid rgba(0,0,0,.25)",padding:"10px"}),$(this).attr("data-val","1")):($("#submenu").css({height:"0px",border:"0px",padding:"0px"}),$(this).attr("data-val","0"),$("#sub2menu").css({height:"0px",border:"0px solid rgba(0,0,0,.25)",padding:"0px"}),$("#sub3menu").css({height:"0px",border:"0px solid rgba(0,0,0,.25)",padding:"0px"}),$("#sub4menu").css({height:"0px",border:"0px solid rgba(0,0,0,.25)",padding:"0px"}))}),$("#pdf_viewer").dialog({resizable:!0,autoOpen:!1,height:600,width:900,show:{effect:"slide",duration:300},hide:{effect:"blind",duration:300}}),$(document).on("click",".obj_sub_checkbox",function(){"maktablar"==$(this).attr("data-layer_name")&&($(this).prop("checked")?map.addLayer(maktablar):map.removeLayer(maktablar))}),$(document).on("click",".info_table",function(){$(this).css({cursor:"wait"}),$("#search-field").val(""),"apz"==$(this).attr("data-layer_name")&&($("#pagination-apz_div").html('<ul id="pagination-apz" class="pagination-sm"></ul>'),load_apz_table(1,100,"date","-","","","","","","","")),"psd"==$(this).attr("data-layer_name")&&($("#pagination-psd_div").html('<ul id="pagination-psd" class="pagination-sm"></ul>'),load_psd_table(1,100,"date","-","","","","","","","")),"psd_ind"==$(this).attr("data-layer_name")&&($("#pagination-psd_ind_div").html('<ul id="pagination-psd_ind" class="pagination-sm"></ul>'),load_psd_ind_table(1,100,"date","-","","","","","","","")),"perm_rec"==$(this).attr("data-layer_name")&&($("#pagination-perm_rec_div").html('<ul id="pagination-perm_rec" class="pagination-sm"></ul>'),load_perm_rec_table(1,100,"date","-","","","","","","","")),"smr"==$(this).attr("data-layer_name")&&($("#pagination-smr_div").html('<ul id="pagination-smr" class="pagination-sm"></ul>'),load_smr_table(1,100,"date","-","","","","","","","")),"pexpl"==$(this).attr("data-layer_name")&&($("#pagination-pexpl_div").html('<ul id="pagination-pexpl" class="pagination-sm"></ul>'),load_pexpl_table(1,100,"date","-","","","","","","","")),"pexpl_ind"==$(this).attr("data-layer_name")&&($("#pagination-pexpl_ind_div").html('<ul id="pagination-pexpl_ind" class="pagination-sm"></ul>'),load_pexpl_ind_table(1,100,"date","-","","","","","","","")),"loy"==$(this).attr("data-layer_name")&&($("#pagination-loy_div").html('<ul id="pagination-loy" class="pagination-sm"></ul>'),load_loy_table(1,100,"pk","","","","","","","","")),"pud"==$(this).attr("data-layer_name")&&($("#pagination-pud_div").html('<ul id="pagination-pud" class="pagination-sm"></ul>'),load_pud_table(1,100,"pk","","","","","","","","")),"bjs"==$(this).attr("data-layer_name")&&($("#pagination-bjs_div").html('<ul id="pagination-bjs" class="pagination-sm"></ul>'),load_bjs_table(1,100,"pk","","","","","","","","")),"bys"==$(this).attr("data-layer_name")&&($("#pagination-bys_div").html('<ul id="pagination-bys" class="pagination-sm"></ul>'),load_bys_table(1,100,"pk","","","","","","","",""))}),$(document).on("click",".info_table_2",function(){$(this).css({cursor:"wait"}),"bjs"==$(this).attr("data-layer_name")&&($("#pagination-bjs_div").html('<ul id="pagination-bjs" class="pagination-sm"></ul>'),load_bjs_table(1,100,"pk","","","","","","","","")),"bys"==$(this).attr("data-layer_name")&&($("#pagination-bys_div").html('<ul id="pagination-bys" class="pagination-sm"></ul>'),load_bys_table(1,100,"pk","","","","","","","",""))}),$("#dialog_maktab_info").dialog({width:400,height:640,position:{my:"left top",at:"right bottom",of:window},autoOpen:!1,dialogClass:"dialog_maktab_info",resize:function(a){$(this).css({width:"auto"})},create:function(a){$(".dialog_maktab_info").children(".ui-dialog-titlebar").append("<button  type='button' class='img_mini_maxi' data-val='0'>-x-</button>")},show:{effect:"blind",duration:300},hide:{effect:"slide",duration:300}}),$("#dialog_maktab_qur_info").dialog({width:900,height:640,autoOpen:!1,dialogClass:"dialog_maktab_qur_info",create:function(a){$(".dialog_maktab_qur_info").children(".ui-dialog-titlebar").append("<button  type='button' class='img_mini_maxi' data-val='0'>-x-</button>")},show:{effect:"blind",duration:300},hide:{effect:"slide",duration:300}});var openstreetmap=new L.TileLayer("https://{s}.tile.osm.org/{z}/{x}/{y}.png"),googleStreets=L.tileLayer("https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),googleHybrid=L.tileLayer("https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),googleSat=L.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),googleTerrain=L.tileLayer("https://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),openstreetmap_topo=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17});map.addLayer(googleStreets);var mytile=L.tileLayer.wms("/geocache/",{layers:"dshk:orto_yangibozor",format:"image/png",maxZoom:20,minZoom:1,zIndex:2,transparent:!0});L.Control.boxzoom({position:"topleft"}).addTo(map);for(var maktablar=L.nonTiledLayer.wms("/geodata/",{maxZoom:22,minZoom:1,zIndex:2,opacity:.8,layers:"dshk:maktablar",format:"image/png",transparent:!0}),red_lines=L.nonTiledLayer.wms("/geodata/",{layers:"dshk:red_lines",format:"image/png",maxZoom:20,minZoom:1,zIndex:2,opacity:.8,transparent:!0}),geologik_rayonlash=L.tileLayer.wms("/geodata/",{layers:"dshk:geologik_rayonlash",format:"image/png",maxZoom:20,minZoom:1,opacity:.8,zIndex:2,transparent:!0}),apot=L.nonTiledLayer.wms(),apot_edit=L.nonTiledLayer.wms(),funk_zones_po_apot=L.nonTiledLayer.wms(),genplan=L.nonTiledLayer.wms(),genplan_edit=L.nonTiledLayer.wms(),genplan_geotiff=new Array,genplan_edit_geotiff=new Array,funk_zones_po_genplan=L.nonTiledLayer.wms(),pdp=L.nonTiledLayer.wms(),pdp_edit=L.nonTiledLayer.wms(),pdp_geotiff=new Array,pdp_edit_geotiff=new Array,i=0;i<50;i++)genplan_geotiff[i]=L.tileLayer.wms(),genplan_edit_geotiff[i]=L.tileLayer.wms(),pdp_geotiff[i]=L.tileLayer.wms(),pdp_edit_geotiff[i]=L.tileLayer.wms();$(document).on("click",".view_pdf_file",function(){var a=$(this).attr("data-folder"),t=$(this).attr("data-file");$("#myIframe").attr("src","/static/pdf_viewer/web/viewer.html?file=/static/"+a+"/"+t),$("#pdf_viewer").dialog("open")}),$(document).on("click",".checkbox_geotiff_pdp",function(){if($(this).prop("checked"))map.hasLayer(pdp)&&map.removeLayer(pdp),pdp_geotiff[$(this).attr("data-layer_id")]=L.tileLayer.wms("/geocache",{opacity:$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").val()/10,layers:"dshk:"+$(this).attr("data-layer_name"),format:"image/png",zIndex:$(this).attr("data-layer_id"),maxZoom:20,transparent:!0}).addTo(map),$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").attr("disabled",!1);else{$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").attr("disabled",!0),map.removeLayer(pdp_geotiff[$(this).attr("data-layer_id")]);var a=0;$(".checkbox_geotiff_pdp").each(function(){$(this).prop("checked")&&a++}),0==a&&$("#checkbox_id_2_3_2").prop("checked")&&map.addLayer(pdp)}}),$(document).on("click",".checkbox_geotiff_pdp_edit",function(){if($(this).prop("checked"))map.hasLayer(pdp_edit)&&map.removeLayer(pdp_edit),pdp_edit_geotiff[$(this).attr("data-layer_id")]=L.tileLayer.wms("/geocache",{opacity:$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").val()/10,layers:"dshk:"+$(this).attr("data-layer_name"),format:"image/png",zIndex:$(this).attr("data-layer_id"),maxZoom:20,transparent:!0}).addTo(map),$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").attr("disabled",!1);else{$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").attr("disabled",!0),map.removeLayer(pdp_edit_geotiff[$(this).attr("data-layer_id")]);var a=0;$(".checkbox_geotiff_pdp_edit").each(function(){$(this).prop("checked")&&a++}),0==a&&$("#checkbox_id_2_3_2_1").prop("checked")&&map.addLayer(pdp_edit)}}),$(document).on("click",".checkbox_geotiff_genplan",function(){if($(this).prop("checked"))map.hasLayer(genplan)&&map.removeLayer(genplan),genplan_geotiff[$(this).attr("data-layer_id")]=L.tileLayer.wms("/geocache",{opacity:$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").val()/10,layers:"dshk:"+$(this).attr("data-layer_name"),format:"image/png",zIndex:$(this).attr("data-layer_id"),maxZoom:20,transparent:!0}).addTo(map),$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").attr("disabled",!1);else{$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").attr("disabled",!0),map.removeLayer(genplan_geotiff[$(this).attr("data-layer_id")]);var a=0;$(".checkbox_geotiff_genplan").each(function(){$(this).prop("checked")&&a++}),0==a&&$("#checkbox_id_2_3_1").prop("checked")&&map.addLayer(genplan)}}),$(document).on("click",".checkbox_geotiff_genplan_edit",function(){if($(this).prop("checked"))map.hasLayer(genplan_edit)&&map.removeLayer(genplan_edit),genplan_edit_geotiff[$(this).attr("data-layer_id")]=L.tileLayer.wms("/geocache",{opacity:$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").val()/10,layers:"dshk:"+$(this).attr("data-layer_name"),format:"image/png",zIndex:$(this).attr("data-layer_id"),maxZoom:20,transparent:!0}).addTo(map),$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").attr("disabled",!1);else{$("input[data-layer_id='"+$(this).attr("data-layer_id")+"'][type='range']").attr("disabled",!0),map.removeLayer(genplan_edit_geotiff[$(this).attr("data-layer_id")]);var a=0;$(".checkbox_geotiff_genplan_edit").each(function(){$(this).prop("checked")&&a++}),0==a&&$("#checkbox_id_2_3_1_1").prop("checked")&&map.addLayer(genplan_edit)}}),$(document).on("click",".button_pdf_viewer",function(){var a=$(this).attr("data-filename");$("#myIframe").attr("src","/static/pdf_viewer/web/viewer.html?file=/"+mydecode(a)),$("#pdf_viewer").dialog("open")}),$(document).on("change",".change_opacity_pdp",function(a){map.hasLayer(pdp)&&pdp.setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_pdp_edit",function(a){map.hasLayer(pdp_edit)&&pdp_edit.setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_geotiff_pdp",function(a){pdp_geotiff[$(this).attr("data-layer_id")].setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_geotiff_pdp_edit",function(a){pdp_edit_geotiff[$(this).attr("data-layer_id")].setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_genplan",function(a){map.hasLayer(genplan)&&genplan.setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_genplan_edit",function(a){map.hasLayer(genplan_edit)&&genplan_edit.setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_geotiff_genplan",function(a){genplan_geotiff[$(this).attr("data-layer_id")].setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_geotiff_genplan_edit",function(a){genplan_edit_geotiff[$(this).attr("data-layer_id")].setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_apot",function(a){map.hasLayer(apot)&&apot.setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_apot_edit",function(a){map.hasLayer(apot_edit)&&apot_edit.setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_funk_zone_po_genplan",function(a){funk_zones_po_genplan.setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_geologik_rayonlash",function(a){geologik_rayonlash.setOpacity($(this).val()/10)}),$(document).on("change",".change_opacity_funk_zone_po_apot",function(a){funk_zones_po_apot.setOpacity($(this).val()/10)}),$(document).on("click",".info_maktab_qur_mal",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("kod",$(this).attr("data-kod")),$.ajax({url:"info_maktab",data:a,cache:!1,contentType:!1,processData:!1,type:"post",beforeSend:function(){},success:function(a){if(0!=a){var t="<table class='table table-bordered table-striped'>\n          <tr><td>ajratilgan_yer_maydoni_ga</td><td>"+a.ajratilgan_yer_maydoni_ga+"</td></tr>\n          <tr><td>art_1_2_nomi_raqami_va_sanasi</td><td>"+a.art_1_2_nomi_raqami_va_sanasi+"</td></tr>\n          <tr><td>arxitektura_kengashi_raqami_va_sanasi</td><td>"+a.arxitektura_kengashi_raqami_va_sanasi+"</td></tr>\n          <tr><td>bino_korpus_nomi_yoki_raqami</td><td>"+a.bino_korpus_nomi_yoki_raqami+"</td></tr>\n          <tr><td>binoning_foydali_maydoni_m_kv</td><td>"+a.binoning_foydali_maydoni_m_kv+"</td></tr>\n          <tr><td>binoning_qurilish_maydoni_m_kv</td><td>"+a.binoning_qurilish_maydoni_m_kv+"</td></tr>\n          <tr><td>binoning_qurilish_xajmi_m_kub</td><td>"+a.binoning_qurilish_xajmi_m_kub+"</td></tr>\n          <tr><td>bosh_pudratshi</td><td>"+a.bosh_pudratshi+"</td></tr>\n          <tr><td>daqnning_ruxsatnoma_raqami_va_sanasi</td><td>"+a.daqnning_ruxsatnoma_raqami_va_sanasi+"</td></tr>\n          <tr><td>devor_konstruktsiyasi</td><td>"+a.devor_konstruktsiyasi+"</td></tr>\n          <tr><td>ekspertiza_xulosasining_raqami_va_sanasi</td><td>"+a.ekspertiza_xulosasining_raqami_va_sanasi+"</td></tr>\n          <tr><td>ertula_mavjudligi</td><td>"+a.ertula_mavjudligi+"</td></tr>\n          <tr><td>foydalanishga_qabul_qilish_togrisidagi_qaror_raqami_va_sanasi</td><td>"+a.foydalanishga_qabul_qilish_togrisidagi_qaror_raqami_va_sanasi+"</td></tr>\n          <tr><td>loyiha_smeta_nomi_va_raqami</td><td>"+a.loyiha_smeta_nomi_va_raqami+"</td></tr>\n<tr><td>muassasaning_tuliq_nomi</td><td>"+a.muassasaning_tuliq_nomi+"</td></tr>\n<tr><td>obektning_kadastr_raqami</td><td>"+a.obektning_kadastr_raqami+"</td></tr>\n<tr><td>obektning_loyixa_quvvati</td><td>"+a.obektning_loyixa_quvvati+"</td></tr>\n<tr><td>poydevor_turi</td><td>"+a.poydevor_turi+"</td></tr>\n<tr><td>qavatlar_soni</td><td>"+a.qavatlar_soni+"</td></tr>\n<tr><td>qurilgan_rek_ya_qilingan_yili</td><td>"+a.qurilgan_rek_ya_qilingan_yili+"</td></tr>\n <tr><td>qurilish_turi_yangi_qurilish_rekonstruktsiya</td><td>"+a.qurilish_turi_yangi_qurilish_rekonstruktsiya+"</td></tr>\n<tr><td>qurilishni_moliyalashtirish_manbai</td><td>"+a.qurilishni_moliyalashtirish_manbai+"</td></tr>\n<tr><td>qurilishni_umumiy_qiymati_mln_som</td><td>"+a.qurilishni_umumiy_qiymati_mln_som+"</td></tr>\n<tr><td>shundan_byudjet_mablaglari_mln_som</td><td>"+a.shundan_byudjet_mablaglari_mln_som+"</td></tr>\n <tr><td>tashqi_pardoz_turi</td><td>"+a.tashqi_pardoz_turi+"</td></tr>\n<tr><td>tom_yopma_turi</td><td>"+a.tom_yopma_turi+"</td></tr>\n<tr><td>xokim_yer_ajratish_tugrisidagi_qaror_raqami_va_sanasi</td><td>"+a.xokim_yer_ajratish_tugrisidagi_qaror_raqami_va_sanasi+"</td></tr>\n\n          </table>";$("#dialog_maktab_qur_info").html(t),$("#dialog_maktab_qur_info").dialog("open"),document.getElementById("dialog_maktab_qur_info").scrollTop=0}else alert("Qurulish ma'lumoti berilmagan !!")}})}),ms_url="/geodata/?",ms_url2="/geodata/?";var popup=L.popup();function send_feature(a,t){var e="/geodata?service=WFS&version=1.0.0&request=GetFeature&typeName=dshk:"+t+"&outputFormat=application%2Fjson&cql_filter=id='"+a+"'";$.getJSON(e,function(a){"genplans"==t&&create_popup_genplan(a.features[0].properties),"genplans_edit"==t&&create_popup_genplan_edit(a.features[0].properties),"pdp"==t&&create_popup_pdp(a.features[0].properties),"pdp_edit"==t&&create_popup_pdp_edit(a.features[0].properties),"apots"==t&&create_popup_apot(a.features[0].properties),"apots_edit"==t&&create_popup_apot_edit(a.features[0].properties)})}function get_style_vil(a){return"Qoraqalpog'iston Respublikasi"==a?"#ffed7b":"Xorazm viloyati"==a?"#FF0500":"Navoiy viloyati"==a?"#7FFF00":"Buxoro viloyati"==a?"#00ffff":"Samarqand viloyati"==a?"#FF4500":"Qashqadaryo viloyati"==a?"#ffed7b":"Surxondaryo viloyati"==a?"#D2691E":"Jizzax viloyati"==a?"#ff7f50":"Sirdaryo viloyati"==a?"#D2691E":"Toshkent viloyati"==a?"#ff1443":"Namangan viloyati"==a?"#FFA500":"Farg'ona viloyati"==a?"#009900":"Andijon viloyati"==a?"#7FFF00":""}function style_vil(a){return{fillColor:get_style_vil(a.properties.RegionNa_1),weight:3,opacity:.6,color:"#000",dashArray:"2",fillOpacity:.7}}function onEachFeature_vil(a,t){t.on({mouseover:mouseover_vil,mouseout:mouseout_vil,click:click_vil})}function click_vil(a){uzb_vil.resetStyle(a.target),map.fitBounds(a.target.getBounds()),a.target.setStyle({fillOpacity:0})}function mouseover_vil(a){var t=a.target;t.setStyle({fillColor:"#fff",weight:4,opacity:.8,color:"#000",dashArray:"0.1",fillOpacity:.6}),t.bindTooltip(t.feature.properties.RegionNa_1,{direction:"top",className:"tooltip_vil",offset:[0,-10],sticky:!0,opacity:.9}).openTooltip()}function mouseout_vil(a){uzb_vil.resetStyle(a.target)}map.on("click",function(a){$("#layer_control").css({width:"0px",height:"0px",border:"0px solid rgba(0,0,0,.25)",padding:"0px"}),$("#all_maps").attr("data-val","0");a.latlng.lat.toFixed(5),a.latlng.lng.toFixed(5);var t=map.getBounds()._southWest.lng+","+map.getBounds()._southWest.lat+","+map.getBounds()._northEast.lng+","+map.getBounds()._northEast.lat,e=map.getSize().x,i=map.getSize().y,n=map.layerPointToContainerPoint(a.layerPoint).x,o=map.layerPointToContainerPoint(a.layerPoint).y;if(map.hasLayer(maktablar)){var r=ms_url+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:maktablar&QUERY_LAYERS=dshk:maktablar&BBOX="+t+"&FEATURE_COUNT=1&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){if(a.features.length){var t="<p style='font-size:16px; color:rgba(0,0,0,0.7); font-weight:bold;text-align:center;'>"+a.features[0].properties.uquv_muassasasining_tuliq_nomi+"</p>\n<table class='table table-bordered table-striped'>\n<tr><td>O'quv muassasasi nomi</td><td>"+a.features[0].properties.uquv_muassasasining_tuliq_nomi+"</td></tr>\n<tr><td>Viloyat</td><td>"+a.features[0].properties.viloyat_nomi+"</td></tr>\n<tr><td>Tuman, shahar nomi</td><td>"+a.features[0].properties.tuman_shahar_nomi+"</td></tr>\n<tr><td>Joylashgan manzili</td><td>"+a.features[0].properties.joylashgan_joyi_manzili+"</td></tr>\n<tr><td>O'quv muassasasining turi</td><td>"+a.features[0].properties.uquv_muassasasining_turi+"</td></tr>\n<tr><td>O'quv muassasasining tashkil topgan yili</td><td>"+a.features[0].properties.uquv_muassasasining_tashkil_topgan_yili+"</td></tr>\n<tr><td>Qurilgan yili</td><td>"+a.features[0].properties.qurilgan_yili+"</td></tr>\n<tr><td>Loyihaviy quvvati</td><td>"+a.features[0].properties.loyihaviy_quvvati+"</td></tr>\n<tr><td>O'quv_smenlari_soni</td><td>"+a.features[0].properties.uquv_smenlari_soni+"</td></tr>\n<tr><td>Ixtisoslashtirilgan yo'nalishi</td><td>"+a.features[0].properties.ixtisoslashtirilgan_yunalishi+"</td></tr>\n<tr><td>Loyihani ko'rish</td><td>"+a.features[0].properties.loyihani_kurish+"</td></tr>\n<tr><td>Qurulish ma'lumotlari</td><td><p class='info_maktab_qur_mal btn btn-success'  data-kod='"+a.features[0].properties.kod+"'>Ko'rish</p></td></tr>\n\n</table>\n\n";$("#dialog_maktab_info").html(t),$("#dialog_maktab_info").dialog("open"),document.getElementById("dialog_maktab_info").scrollTop=0}}})}if(map.hasLayer(funk_zones_po_genplan)){r=ms_url+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:funk_zones_po_genplan&QUERY_LAYERS=dshk:funk_zones_po_genplan&BBOX="+t+"&FEATURE_COUNT=1&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&(text="<p>Karta ko'rinish holatini sozlash </p>\n<input type='range' min=0 max=10 value=8 class='change_opacity_funk_zone_po_genplan' ><br>",text+='<table class = "table table-bordered table-striped"  style = "font-size:15px; overflow-x: hidden !important;" >\n<tr><td>Zonalarning nomi</td><td>'+a.features[0].properties.zonalarning_nomi+"</td></tr>\n<tr><td>Mavjud umoratlarning tavsifi(asosan)</td><td>"+a.features[0].properties.mavjud_imoratlarning_tavsifi_asosan+"</td></tr>\n<tr><td>Shaharsozlik faoliyatining ruxsat etilgan turi</td><td>"+a.features[0].properties.shaharsozlik_faoliyatining_ruxsat_berilgan_turi+"</td></tr>\n<tr><td>Shaharsozlik faoliyatining muayyan shartlar asosida ruxsat etilgan turi</td><td>"+a.features[0].properties.shaharsozlik_faoliyatining_muayyan_shartlarni_bajargan_holda_ru+"</td></tr>\n<tr><td>Shaharsozlik faoliyatining taqiqlangan turi</td><td>"+a.features[0].properties.shaharsozlik_faoliyatining_taqiqlangan_turi+"</td></tr>\n<tr><td>Funksional zonalarning maydoni(ga)</td><td>"+a.features[0].properties.funktsional_zonalarning_maydoni_ga+"</td></tr>\n</table>",$("#popup_dialog_funk_zones_po_genplan").html(text),$("#popup_dialog_funk_zones_po_genplan").dialog("open"),document.getElementById("popup_dialog_funk_zones_po_genplan").scrollTop=0)}})}if(map.hasLayer(geologik_rayonlash)){r=ms_url+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:geologik_rayonlash&QUERY_LAYERS=dshk:geologik_rayonlash&BBOX="+t+"&FEATURE_COUNT=1&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&(text="<p>Karta ko'rinish holatini sozlash </p>\n<input type='range' min=0 max=10 value=8 class='change_opacity_geologik_rayonlash' ><br>",text+="<table class = \"table table-bordered table_geologik_rayonlash\"  style = \"font-size:15px; overflow-x: hidden !important;\" >\n<tr>\n<td colspan='2'><b>Injenerlik geologik viloyat</b></td>\n<td colspan='2'><b>Injenerlik geologik hudud</b></td>\n<td colspan='2'><b>Injenerlik geologik kichik hududlar indeksi</b></td>\n<td colspan='2'><b>Injenerlik geologik uchastka</b></td>\n<td rowspan='2'><b>Hududlarning geologik genetik tavsifi</b></td>\n<td rowspan='2'><b>Hududdagi geodinamik jarayonlar</b></td>\n<td rowspan='2'><b>Tavsiya etiladigan injenerlik tadbirlari</b></td>\n<td rowspan='2'><b>Gruntlarning seysmik xususiyatlari buyicha toifasi</b></td>\n</tr>\n<tr>\n<td><b>indeksi</b></td>\n<td><b>tavsifi</b></td>\n<td><b>indeksi</b></td>\n<td><b>tavsifi</b></td>\n<td><b>indeksi</b></td>\n<td><b>tavsifi</b></td>\n<td><b>indeksi</b></td>\n<td><b>tavsifi</b></td>\n\n</tr>\n<tr>\n<td>"+a.features[0].properties.injenerlik_geologik_viloyat_indeksi+"</td>\n<td>"+a.features[0].properties.injenerlik_geologik_viloyat_tavsifi+"</td>\n<td>"+a.features[0].properties.injenerlik_geologik_hududlar_indeksi+"</td>\n<td>"+a.features[0].properties.injenerlik_geologik_hududlar_tavsifi+"</td>\n<td>"+a.features[0].properties.injenerlik_geologik_kichik_hududlar_indeksi+"</td>\n<td>"+a.features[0].properties.injenerlik_geologik_kichik_hududlar_tavsifi+"</td>\n<td>"+a.features[0].properties.injenerlik_geologik_uchastkalar_indeksi+"</td>\n<td>"+a.features[0].properties.injenerlik_geologik_uchastkalar_tavsifi+"</td>\n<td>"+a.features[0].properties.hududlarning_geologik_genetik_tavsifi+"</td>\n<td>"+a.features[0].properties.hududdagi_geodinamik_jarayonlar+"</td>\n<td>"+a.features[0].properties.tavsiya_etiladigan_injenerlik_tadbirlari+"</td>\n<td>"+a.features[0].properties.gruntlarning_seysmik_xususiyatlari_buyicha_toifasi+"</td>\n\n</tr>\n</table>",$("#popup_dialog_geologik_rayonlash").html(text),$("#popup_dialog_geologik_rayonlash").dialog("open"),document.getElementById("popup_dialog_geologik_rayonlash").scrollTop=0)}})}if(map.hasLayer(funk_zones_po_apot)){r=ms_url+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:funk_zones_po_apot&QUERY_LAYERS=dshk:funk_zones_po_apot&BBOX="+t+"&FEATURE_COUNT=1&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&(text="<p>Karta ko'rinish holatini sozlash </p>\n<input type='range' min=0 max=10 value=8 data-layer_name="+a.features[0].id.split("_")[0]+" class='change_opacity_funk_zone_po_apot' ><br>",text+='<table class = "table table-bordered table-striped"  style = "font-size:15px; overflow-x: hidden !important;" >\n<tr><td>Zonalarning nomi</td><td>'+a.features[0].properties.zonalarning_nomi+"</td></tr>\n<tr><td>Mavjud umoratlarning tavsifi(asosan)</td><td>"+a.features[0].properties.mavjud_imoratlarning_tavsifi_asosan+"</td></tr>\n<tr><td>Shaharsozlik faoliyatining ruxsat etilgan turi</td><td>"+a.features[0].properties.shaharsozlik_faoliyatining_ruxsat_berilgan_turi+"</td></tr>\n<tr><td>Shaharsozlik faoliyatining muayyan shartlar asosida ruxsat etilgan turi</td><td>"+a.features[0].properties.shaharsozlik_faoliyatining_muayyan_shartlarni_bajargan_holda_ru+"</td></tr>\n<tr><td>Shaharsozlik faoliyatining taqiqlangan turi</td><td>"+a.features[0].properties.shaharsozlik_faoliyatining_taqiqlangan_turi+"</td></tr>\n<tr><td>Funksional zonalarning maydoni(ga)</td><td>"+a.features[0].properties.funktsional_zonalarning_maydoni_ga+"</td></tr>\n</table>",$("#popup_dialog_funk_zones_po_apot").html(text),$("#popup_dialog_funk_zones_po_apot").dialog("open"),document.getElementById("popup_dialog_funk_zones_po_apot").scrollTop=0)}})}if(map.hasLayer(genplan)){r=ms_url+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:genplans&QUERY_LAYERS=dshk:genplans&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(t){if(t.features.length){var e=gsch.bbox(gsch.multiPolygon(t.features[0].geometry.coordinates));if(map.flyToBounds([[e[1],e[0]],[e[3],e[2]]]),1==t.features.length)send_feature(t.features[0].properties.id,"genplans");else{var i='\n<div class="list-group">\n  <a href="#" class="list-group-item list-group-item-action active">Topilgan genplanlar ro\'yxati:\n</a>';for(var n in t.features)i+="<a href=\"#\" data-layer_name='genplans' data-layer_id='"+t.features[n].properties.id+'\' class="list-group-item list-group-item-action a_feature_list ">'+t.features[n].properties.aholi_punktining_nomi+"</a>";i+="</div>",popup=L.popup().setLatLng(a.latlng).setContent(i).openOn(map)}}}})}if(map.hasLayer(genplan_edit)){r=ms_url+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:genplans_edit&QUERY_LAYERS=dshk:genplans_edit&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(t){if(t.features.length){var e=gsch.bbox(gsch.multiPolygon(t.features[0].geometry.coordinates));if(map.flyToBounds([[e[1],e[0]],[e[3],e[2]]]),1==t.features.length)send_feature(t.features[0].properties.id,"genplans_edit");else{var i='\n<div class="list-group">\n  <a href="#" class="list-group-item list-group-item-action active">Topilgan genplanlar ro\'yxati:\n</a>';for(var n in t.features)i+="<a href=\"#\" data-layer_name='genplans_edit' data-layer_id='"+t.features[n].properties.id+'\' class="list-group-item list-group-item-action a_feature_list ">'+t.features[n].properties.aholi_punktining_nomi+"</a>";i+="</div>",popup=L.popup().setLatLng(a.latlng).setContent(i).openOn(map)}}}})}if(map.hasLayer(pdp)){r=ms_url+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:pdp&QUERY_LAYERS=dshk:pdp&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(t){if(t.features.length){var e=gsch.bbox(gsch.multiPolygon(t.features[0].geometry.coordinates));if(map.flyToBounds([[e[1],e[0]],[e[3],e[2]]]),1==t.features.length)send_feature(t.features[0].properties.id,"pdp");else{var i='\n<div class="list-group">\n  <a href="#" class="list-group-item list-group-item-action active">Topilgan pdplar ro\'yxati:\n</a>';for(var n in t.features)i+="<a href=\"#\" data-layer_name='pdp' data-layer_id='"+t.features[n].properties.id+'\' class="list-group-item list-group-item-action a_feature_list ">'+t.features[n].properties.aholi_punktining_nomi+"</a>";i+="</div>",popup=L.popup().setLatLng(a.latlng).setContent(i).openOn(map)}}}})}if(map.hasLayer(pdp_edit)){r=ms_url+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:pdp_edit&QUERY_LAYERS=dshk:pdp_edit&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(t){if(t.features.length){var e=gsch.bbox(gsch.multiPolygon(t.features[0].geometry.coordinates));if(map.flyToBounds([[e[1],e[0]],[e[3],e[2]]]),1==t.features.length)send_feature(t.features[0].properties.id,"pdp_edit");else{var i='\n<div class="list-group">\n  <a href="#" class="list-group-item list-group-item-action active">Topilgan pdplar ro\'yxati:\n</a>';for(var n in t.features)i+="<a href=\"#\" data-layer_name='pdp_edit' data-layer_id='"+t.features[n].properties.id+'\' class="list-group-item list-group-item-action a_feature_list ">'+t.features[n].properties.aholi_punktining_nomi+"</a>";i+="</div>",popup=L.popup().setLatLng(a.latlng).setContent(i).openOn(map)}}}})}if(map.hasLayer(apot)){r=ms_url+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:apots&QUERY_LAYERS=dshk:apots&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(t){if(t.features.length){var e=gsch.bbox(gsch.multiPolygon(t.features[0].geometry.coordinates));if(map.flyToBounds([[e[1],e[0]],[e[3],e[2]]]),1==t.features.length)send_feature(t.features[0].properties.id,"apots");else{var i='\n<div class="list-group">\n  <a href="#" class="list-group-item list-group-item-action active">Topilgan APOT lar ro\'yxati:\n</a>';for(var n in t.features)i+="<a href=\"#\" data-layer_name='apots' data-layer_id='"+t.features[n].properties.id+'\' class="list-group-item list-group-item-action a_feature_list ">'+t.features[n].properties.fuqarolar_yiginlari+"</a>";i+="</div>",popup=L.popup().setLatLng(a.latlng).setContent(i).openOn(map)}}}})}if(map.hasLayer(apot_edit)){r=ms_url+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:apots_edit&QUERY_LAYERS=dshk:apots_edit&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(t){if(t.features.length){var e=gsch.bbox(gsch.multiPolygon(t.features[0].geometry.coordinates));if(map.flyToBounds([[e[1],e[0]],[e[3],e[2]]]),1==t.features.length)send_feature(t.features[0].properties.id,"apots_edit");else{var i='\n<div class="list-group">\n  <a href="#" class="list-group-item list-group-item-action active">Topilgan APOT lar ro\'yxati:\n</a>';for(var n in t.features)i+="<a href=\"#\" data-layer_name='apots_edit' data-layer_id='"+t.features[n].properties.id+'\' class="list-group-item list-group-item-action a_feature_list ">'+t.features[n].properties.fuqarolar_yiginlari+"</a>";i+="</div>",popup=L.popup().setLatLng(a.latlng).setContent(i).openOn(map)}}}})}if(map.hasLayer(apz)){r=ms_url2+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:apz&QUERY_LAYERS=dshk:apz&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&create_apz_full_info(a.features[0].properties.apz)},error:function(){console.log("Ajaxda xatolik")}})}if(map.hasLayer(psd)){r=ms_url2+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:psd&QUERY_LAYERS=dshk:psd&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&create_psd_full_info(a.features[0].properties.psd)},error:function(){console.log("Ajaxda xatolik")}})}if(map.hasLayer(psd_ind)){r=ms_url2+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:psd_ind&QUERY_LAYERS=dshk:psd_ind&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&create_psd_ind_full_info(a.features[0].properties.psd_ind)},error:function(){console.log("Ajaxda xatolik")}})}if(map.hasLayer(perm_rec)){r=ms_url2+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:perm_rec&QUERY_LAYERS=dshk:perm_rec&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&create_perm_rec_full_info(a.features[0].properties.perm_rec)},error:function(){console.log("Ajaxda xatolik")}})}if(map.hasLayer(smr)){r=ms_url2+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:smr&QUERY_LAYERS=dshk:smr&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&create_smr_full_info(a.features[0].properties.smr)},error:function(){console.log("Ajaxda xatolik")}})}if(map.hasLayer(pexpl)){r=ms_url2+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:pexpl&QUERY_LAYERS=dshk:pexpl&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&create_pexpl_full_info(a.features[0].properties.pexpl)},error:function(){console.log("Ajaxda xatolik")}})}if(map.hasLayer(pexpl_ind)){r=ms_url2+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:pexpl_ind&QUERY_LAYERS=dshk:pexpl_ind&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&create_pexpl_ind_full_info(a.features[0].properties.pexpl_ind)},error:function(){console.log("Ajaxda xatolik")}})}if(map.hasLayer(loy)){r=ms_url2+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:loy&QUERY_LAYERS=dshk:loy&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&create_loyihachi_full_info(a.features[0].properties.inn)},error:function(){console.log("Ajaxda xatolik")}})}if(map.hasLayer(pud)){r=ms_url2+"SERVICE=WMS&VERSION=1.1.0&REQUEST=GetFeatureInfo&LAYERS=dshk:pud&QUERY_LAYERS=dshk:pud&BBOX="+t+"&FEATURE_COUNT=100&HEIGHT="+i+"&WIDTH="+e+"&INFO_FORMAT=application/json&SRS=EPSG:4326&X="+n+"&Y="+o;$.ajax({url:r,dataType:"json",type:"GET",success:function(a){a.features.length&&create_pudratchi_full_info(a.features[0].properties.inn)},error:function(){console.log("Ajaxda xatolik")}})}}),$("[data-magnify]").magnify({fixedContent:!1}),$("#login_logo").on("click",function(){"1"==$(this).attr("click")?($("#login_logout").css({width:"0",padding:"0",border:"0px"}),$(this).attr("click","0")):($("#login_logout").css({width:"auto",padding:"9",border:"1px solid rgba(0,0,0,0.25)"}),$(this).attr("click","1"))}),$(document).on("click",".a_feature_list",function(){map.removeLayer(popup),send_feature($(this).attr("data-layer_id"),$(this).attr("data-layer_name"))}),$("#logout_button").on("click",function(){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),$.ajax({url:"logoutt",data:a,cache:!1,contentType:!1,processData:!1,type:"post",beforeSend:function(){},success:function(a){1==a?window.location.href="/main":console.log(a)},error:function(){console.log("ajax da xatolik !!")}})}),$("#login_button").on("click",function(){window.location.href="/login_form?page=main"});var uzb_vil=L.geoJson(null,{style:style_vil,onEachFeature:onEachFeature_vil}).addTo(map);$.getJSON("/static/uzb.json",function(a){uzb_vil.addData(a)});var uzb_res=L.nonTiledLayer.wms("/geodata/",{maxZoom:20,minZoom:1,zIndex:-1,opacity:.8,layers:"dshk:uzb",format:"image/png",transparent:!0}),genplan_click=L.nonTiledLayer.wms(),apot_click=L.nonTiledLayer.wms(),setObject=L.geoJson(null,{style:{color:"orange",fillOpacity:.5},pointToLayer:function(a,t){return new L.CircleMarker(t,{radius:8,fillOpacity:.85})}});function searchFromTable(a,t,e,i,n){var o,r,s,l,d,p,_=25;o=document.getElementById(a);var c=$("#"+e).val(),u=!0;1==$("#"+t).val()&&(u=!1),r=o.value.toUpperCase(),s=document.getElementById(i).getElementsByTagName("tr");var m=0;for(c>-1&&(_=1),d=0;d<s.length;d++)if(0!=d){var h=!1;for(p=0;p<_;p++){col_t_id=p,1==_&&(col_t_id=c),l=s[d].getElementsByTagName("td")[col_t_id];var g=r;u||(g="^"+g);var y=new RegExp(g,"i");if(l&&l.innerHTML.search(y)>-1){h=!0;break}}h?(s[d].style.display="",m++):s[d].style.display="none"}"item-count_pod9"!=n?$("#"+n).html("Topilgan obyektlar soni: "+m):$("#"+n).html("Topilgan hujjatlar soni: "+m)}$(document).on("click",".fly_to_bounds",function(){var a="/geodata?service=WFS&version=1.0.0&request=GetFeature&typeName=dshk:"+$(this).attr("data-layer_name")+"&outputFormat=application%2Fjson&cql_filter=id='"+$(this).attr("data-id")+"'";$.getJSON(a,function(a){if("MultiPolygon"==a.features[0].geometry.type)var t=gsch.bbox(gsch.multiPolygon(a.features[0].geometry.coordinates));if("Polygon"==a.features[0].geometry.type)t=gsch.bbox(gsch.Polygon(a.features[0].geometry.coordinates));map.flyToBounds([[t[1],t[0]],[t[3],t[2]]])})}),$(document).on("click",".click_set_object",function(){if("setObject"==$(this).attr("data-dtype")){var a=new FormData;a.append("csrfmiddlewaretoken",document.getElementsByName("csrfmiddlewaretoken")[0].value),a.append("query_type","location"),a.append("id",$(this).attr("data-id"));var t=$(this).attr("data-ltype");$.ajax({url:t,data:a,processData:!1,contentType:!1,cache:!1,type:"post",success:function(a){setObject.clearLayers(),"/proekti"==t?(setObject.addData(JSON.parse(a[0].points).features[0]),setObject.addData(JSON.parse(a[0].polygons).features[0])):setObject.addData(JSON.parse(a[0].full_info).features[0]),setObject.addTo(map),map.flyToBounds(setObject.getBounds(),{maxZoom:15})},error:function(){console.log("Ajaxda xatolik!!!")}})}else map.flyToBounds([[$(this).attr("data-bounds-1"),$(this).attr("data-bounds-0")],[$(this).attr("data-bounds-3"),$(this).attr("data-bounds-2")]])}),$(document).on("keyup",".search_input",function(){searchFromTable($(this).attr("data-input_id"),$(this).attr("data-type_id"),$(this).attr("data-maydon_id"),$(this).attr("data-table_id"),$(this).attr("data-count"))}),$(document).on("change",".search-type",function(){searchFromTable($(this).attr("data-input_id"),$(this).attr("data-type_id"),$(this).attr("data-maydon_id"),$(this).attr("data-table_id"),$(this).attr("data-count"))}),$(document).on("change",".search-field-id",function(){searchFromTable($(this).attr("data-input_id"),$(this).attr("data-type_id"),$(this).attr("data-maydon_id"),$(this).attr("data-table_id"),$(this).attr("data-count"))}),$(document).on("change",".search-field-id_pod9",function(){if(-2!=$(this).val()){$("#"+$(this).attr("data-input_id")).val(""),searchFromTable($(this).attr("data-input_id"),$(this).attr("data-type_id"),$(this).attr("data-maydon_id"),$(this).attr("data-table_id"),$(this).attr("data-count"));var a='\n<div class="input-group-addon"> <label >Qidiriluvchi so\'z</label> </div>\n<input type="text" data-input_id=\'search-field_pod9\'  data-count=\'item-count_pod9\' data-type_id=\'search-type_pod9\'  data-maydon_id=\'search-field-id_pod9\'  data-table_id=\'table-info_pod9\' id="search-field_pod9" class = "form-control search_input">\n<div class="input-group-addon"> <label id="item-count_pod9" >'+$("#item-count_pod9").text()+"</label> </div>\n";$("#search_data_div").html(a)}else{$("#"+$(this).attr("data-input_id")).val(""),searchFromTable($(this).attr("data-input_id"),$(this).attr("data-type_id"),$(this).attr("data-maydon_id"),$(this).attr("data-table_id"),$(this).attr("data-count"));var t='\n<div class="input-group-addon"> <label >Oqaliq sani kiriting</label> </div>\n<input type="text" id=\'search_data_input_begin\' autocomplete="off" class = "form-control">\n<div class="input-group-addon"> <label >--</label> </div>\n<input type="text" id=\'search_data_input_end\' autocomplete="off" class = "form-control">\n<div class="input-group-addon" style=\'padding:0px 2px 0px 2px;\'><button id=\'button_date_filter\' class=\'btn btn-success\' style=\'margin:2px; padding:3px;\'>Qidirish</button></div>\n<input type="text" id="search-field_pod9" style=\'display:none;\'>\n<div class="input-group-addon"> <label id="item-count_pod9" >'+$("#item-count_pod9").text()+"</label> </div>\n";$("#search_data_div").html(t),$("#search_data_input_begin").datepicker({changeMonth:!0,changeYear:!0}),$("#search_data_input_begin").datepicker("option","dateFormat","dd.mm.yy"),$("#search_data_input_end").datepicker({changeMonth:!0,changeYear:!0}),$("#search_data_input_end").datepicker("option","dateFormat","dd.mm.yy"),$("#button_date_filter").on("click",function(){var a=$("#search_data_input_begin").val(),t=$("#search_data_input_end").val();create_table_pod9($("#search-type_tip_pod9").val(),$("#search-type_hujjat_pod9").val(),a,t,1)})}}),$(document).on("click",".open_close_secret_div_pdp",function(){"0"==$(this).attr("data-status")?($(this).attr("data-status","1"),$("#secret_div_pdp").css({display:"block"}),$("#span_open_close_pdp").html("&#9650")):($(this).attr("data-status","0"),$("#secret_div_pdp").css({display:"none"}),$("#span_open_close_pdp").html("&#9660"))}),$(document).on("click",".open_close_secret_div_pdp_edit",function(){"0"==$(this).attr("data-status")?($(this).attr("data-status","1"),$("#secret_div_pdp_edit").css({display:"block"}),$("#span_open_close_pdp_edit").html("&#9650")):($(this).attr("data-status","0"),$("#secret_div_pdp_edit").css({display:"none"}),$("#span_open_close_pdp_edit").html("&#9660"))}),$(document).on("click",".open_close_secret_div_genplan",function(){"0"==$(this).attr("data-status")?($(this).attr("data-status","1"),$("#secret_div_genplan").css({display:"block"}),$("#span_open_close_genplan").html("&#9650")):($(this).attr("data-status","0"),$("#secret_div_genplan").css({display:"none"}),$("#span_open_close_genplan").html("&#9660"))}),$(document).on("click",".open_close_secret_div_genplan_edit",function(){"0"==$(this).attr("data-status")?($(this).attr("data-status","1"),$("#secret_div_genplan_edit").css({display:"block"}),$("#span_open_close_genplan_edit").html("&#9650")):($(this).attr("data-status","0"),$("#secret_div_genplan_edit").css({display:"none"}),$("#span_open_close_genplan_edit").html("&#9660"))});var scale=new Array(21);scale=["1:500,000,000","1:250,000,000","1:150,000,000","1:70,000,000","1:35,000,000","1:15,000,000","1:10,000,000","1:4,000,000","1:2,000,000","1:1,000,000","1:500.000","1:250.000","1:150,000","1:70,000","1:35,000","1:15,000","1:8,000","1:4,000","1:2,000","1:1,000","1:500"],map.on("zoomend",function(){$("#contol_zoom_view").text(map.getZoom()),$("#scale_div").html("[ "+scale[map.getZoom()]+" ]")}),drawnItems=new L.FeatureGroup,map.addLayer(drawnItems);const drawControl=new L.Control.Draw({position:"bottomright",draw:{polyline:{metric:!0,shapeOptions:{color:"#000"}},polygon:{allowIntersection:!1,showArea:!0,drawError:{color:"#ff0000",timeout:1e3},shapeOptions:{color:"#0000ff"}},circle:{shapeOptions:{color:"#662d91"}},marker:!0},edit:{featureGroup:drawnItems,remove:!0,buffer:{replacePolylines:!1,separateBuffer:!1}}});map.addControl(drawControl);var _round=function(a,t){return Math.round(a*Math.pow(10,t))/Math.pow(10,t)},strLatLng=function(a){return"("+_round(a.lat,8)+", "+_round(a.lng,8)+")"},getPopupContent=function(a){if(a instanceof L.Marker)return strLatLng(a.getLatLng());if(a instanceof L.Circle){var t=a.getLatLng(),e=a.getRadius();return"Markaz: "+strLatLng(t)+"<br />Radius: "+_round(e,2)+" m"}if(a instanceof L.Polygon){var i=a._defaultShape?a._defaultShape():a.getLatLngs(),n=L.GeometryUtil.geodesicArea(i);return"Maydon: "+L.GeometryUtil.readableArea(n,!0)}if(a instanceof L.Polyline){var o=0;if((i=a._defaultShape?a._defaultShape():a.getLatLngs()).length<2)return"Masofa: N/A";for(var r=0;r<i.length-1;r++)o+=i[r].distanceTo(i[r+1]);return L.popup().setContent("Masofa: "+_round(o,2)+" m").setLatLng(i[i.length-1]).openOn(map),"Masofa: "+_round(o,2)+" m"}return null};map.on(L.Draw.Event.CREATED,function(a){var t=a.layer,e=getPopupContent(t);null!==e&&t.bindPopup(e),drawnItems.addLayer(t)}),map.on(L.Draw.Event.EDITED,function(a){var t=a.layers,e=null;t.eachLayer(function(a){null!==(e=getPopupContent(a))&&a.setPopupContent(e)})}),$("#contol_box_zoom").on("click",function(){$(".leaflet-control-boxzoom")[0].click()}),$("#draw_point").on("click",function(){$(".leaflet-draw-draw-marker")[0].click(),$("#tab-action-draw").css({top:"378px"})}),$("#draw_polyline").on("click",function(){$(".leaflet-draw-draw-polyline")[0].click(),$("#tab-action-draw").css({top:"438px"})}),$("#draw_polygon").on("click",function(){$(".leaflet-draw-draw-polygon")[0].click(),$("#tab-action-draw").css({top:"498px"})}),$("#draw_delete").on("click",function(){map.removeLayer(setObject),$(".leaflet-draw-edit-remove")[0].click(),$("#tab-action-draw").css({top:"558px"})}),$(".leaflet-draw-actions").appendTo("#tab-action-draw");
